{"version":3,"file":"maskito-angular.mjs","sources":["../../../projects/angular/src/lib/maskito.directive.ts","../../../projects/angular/src/lib/maskito.pipe.ts","../../../projects/angular/src/lib/pattern.directive.ts","../../../projects/angular/src/maskito-angular.ts"],"sourcesContent":["import type {OnChanges, OnDestroy} from '@angular/core';\nimport {\n    Directive,\n    effect,\n    ElementRef,\n    inject,\n    Input,\n    NgZone,\n    signal,\n    untracked,\n} from '@angular/core';\nimport {DefaultValueAccessor} from '@angular/forms';\nimport type {MaskitoElementPredicate, MaskitoOptions} from '@maskito/core';\nimport {\n    Maskito,\n    MASKITO_DEFAULT_ELEMENT_PREDICATE,\n    maskitoTransform,\n} from '@maskito/core';\n\n@Directive({standalone: true, selector: '[maskito]'})\nexport class MaskitoDirective implements OnDestroy, OnChanges {\n    private readonly elementRef: HTMLElement = inject(ElementRef).nativeElement;\n    private readonly ngZone = inject(NgZone);\n    private maskedElement: Maskito | null = null;\n\n    // TODO(v4): delete excessive setters/getters\n    private readonly optionsInternal = signal<MaskitoOptions | null>(null);\n    private readonly elementPredicateInternal = signal<MaskitoElementPredicate>(\n        MASKITO_DEFAULT_ELEMENT_PREDICATE,\n    );\n\n    protected readonly initEffect = effect(async () => {\n        const elementPredicate = this.elementPredicateInternal();\n        const options = this.optionsInternal();\n        const {maskedElement, elementRef, ngZone} = this;\n\n        maskedElement?.destroy();\n\n        if (!options) {\n            return;\n        }\n\n        const predicateResult = await elementPredicate(elementRef);\n\n        if (this.elementPredicate !== elementPredicate || this.options !== options) {\n            // Ignore the result of the predicate if the\n            // maskito element (or its options) has changed before the predicate was resolved.\n            return;\n        }\n\n        ngZone.runOutsideAngular(() => {\n            this.maskedElement = new Maskito(predicateResult, options);\n        });\n    });\n\n    constructor() {\n        const accessor = inject(DefaultValueAccessor, {self: true, optional: true});\n\n        if (accessor) {\n            const original = accessor.writeValue.bind(accessor);\n\n            accessor.writeValue = (value: unknown) => {\n                const options = untracked(this.optionsInternal);\n\n                original(\n                    options ? maskitoTransform(String(value ?? ''), options) : value,\n                );\n            };\n        }\n    }\n\n    @Input('maskito')\n    public set options(value: MaskitoOptions | null) {\n        this.optionsInternal.set(value);\n    }\n\n    @Input('maskitoElement')\n    public set elementPredicate(value: MaskitoElementPredicate) {\n        this.elementPredicateInternal.set(value);\n    }\n\n    public get options(): MaskitoOptions | null {\n        return this.optionsInternal();\n    }\n\n    public get elementPredicate(): MaskitoElementPredicate {\n        return this.elementPredicateInternal();\n    }\n\n    // eslint-disable-next-line @angular-eslint/no-empty-lifecycle-method\n    public async ngOnChanges(): Promise<void> {\n        // TODO(v4): delete\n    }\n\n    public ngOnDestroy(): void {\n        this.maskedElement?.destroy();\n    }\n}\n","import type {PipeTransform} from '@angular/core';\nimport {Pipe} from '@angular/core';\nimport type {MaskitoOptions} from '@maskito/core';\nimport {MASKITO_DEFAULT_OPTIONS, maskitoTransform} from '@maskito/core';\n\n@Pipe({\n    standalone: true,\n    name: 'maskito',\n})\nexport class MaskitoPipe implements PipeTransform {\n    public transform(value: unknown, maskitoOptions: MaskitoOptions | null): string {\n        return maskitoTransform(\n            String(value ?? ''),\n            maskitoOptions ?? MASKITO_DEFAULT_OPTIONS,\n        );\n    }\n}\n","import {Directive, inject, Input} from '@angular/core';\n\nimport {MaskitoDirective} from './maskito.directive';\n\n@Directive({\n    standalone: true,\n    selector: '[maskitoPattern]',\n    hostDirectives: [MaskitoDirective],\n})\nexport class MaskitoPattern {\n    private readonly maskitoDirective = inject(MaskitoDirective, {self: true});\n\n    @Input('maskitoPattern')\n    public set regExpStr(pattern: RegExp | string) {\n        this.maskitoDirective.options = {\n            mask: typeof pattern === 'string' ? new RegExp(`^${pattern}$`) : pattern,\n        };\n        this.maskitoDirective.ngOnChanges();\n    }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1.MaskitoDirective"],"mappings":"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"}