import { inject, Injectable } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { TuiPopoverService, TuiThemeColorService } from '@taiga-ui/cdk/services';
import { TUI_DIALOGS } from '@taiga-ui/core/components/dialog';
import { pairwise, startWith } from 'rxjs';
import { TuiSheetDialogComponent } from './sheet-dialog.component';
import { TUI_SHEET_DIALOG_OPTIONS, } from './sheet-dialog.options';
import * as i0 from "@angular/core";
const THEME = '#404040';
class TuiSheetDialogService extends TuiPopoverService {
    constructor() {
        super(...arguments);
        this.theme = inject(TuiThemeColorService);
        this.initial = this.theme.color;
        this.$ = this.items$
            .pipe(startWith([]), pairwise(), takeUntilDestroyed())
            .subscribe(([prev, next]) => {
            if (!prev.length && next.length) {
                this.initial = this.theme.color;
                this.theme.color = THEME;
            }
            if (!next.length && prev.length) {
                this.theme.color = this.initial;
            }
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiSheetDialogService, deps: null, target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiSheetDialogService, providedIn: 'root', useFactory: () => new TuiSheetDialogService(TUI_DIALOGS, TuiSheetDialogComponent, inject(TUI_SHEET_DIALOG_OPTIONS)) }); }
}
export { TuiSheetDialogService };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiSheetDialogService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                    useFactory: () => new TuiSheetDialogService(TUI_DIALOGS, TuiSheetDialogComponent, inject(TUI_SHEET_DIALOG_OPTIONS)),
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hlZXQtZGlhbG9nLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hZGRvbi1tb2JpbGUvY29tcG9uZW50cy9zaGVldC1kaWFsb2cvc2hlZXQtZGlhbG9nLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDakQsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFDOUQsT0FBTyxFQUFDLGlCQUFpQixFQUFFLG9CQUFvQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDL0UsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtDQUFrQyxDQUFDO0FBQzdELE9BQU8sRUFBQyxRQUFRLEVBQUUsU0FBUyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBRXpDLE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBQ2pFLE9BQU8sRUFDSCx3QkFBd0IsR0FFM0IsTUFBTSx3QkFBd0IsQ0FBQzs7QUFFaEMsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDO0FBRXhCLE1BU2EscUJBQXNCLFNBQVEsaUJBQTZDO0lBVHhGOztRQVVxQixVQUFLLEdBQUcsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDOUMsWUFBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1FBRWhCLE1BQUMsR0FBRyxJQUFJLENBQUMsTUFBTTthQUM3QixJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLGtCQUFrQixFQUFFLENBQUM7YUFDckQsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUM3QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO2dCQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7YUFDNUI7WUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO2FBQ25DO1FBQ0wsQ0FBQyxDQUFDLENBQUM7S0FDVjsrR0FoQlkscUJBQXFCO21IQUFyQixxQkFBcUIsY0FSbEIsTUFBTSxjQUNOLEdBQUcsRUFBRSxDQUNiLElBQUkscUJBQXFCLENBQ3JCLFdBQVcsRUFDWCx1QkFBdUIsRUFDdkIsTUFBTSxDQUFDLHdCQUF3QixDQUFDLENBQ25DOztTQUVJLHFCQUFxQjs0RkFBckIscUJBQXFCO2tCQVRqQyxVQUFVO21CQUFDO29CQUNSLFVBQVUsRUFBRSxNQUFNO29CQUNsQixVQUFVLEVBQUUsR0FBRyxFQUFFLENBQ2IsMEJBQ0ksV0FBVyxFQUNYLHVCQUF1QixFQUN2QixNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FDbkM7aUJBQ1IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2luamVjdCwgSW5qZWN0YWJsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge3Rha2VVbnRpbERlc3Ryb3llZH0gZnJvbSAnQGFuZ3VsYXIvY29yZS9yeGpzLWludGVyb3AnO1xuaW1wb3J0IHtUdWlQb3BvdmVyU2VydmljZSwgVHVpVGhlbWVDb2xvclNlcnZpY2V9IGZyb20gJ0B0YWlnYS11aS9jZGsvc2VydmljZXMnO1xuaW1wb3J0IHtUVUlfRElBTE9HU30gZnJvbSAnQHRhaWdhLXVpL2NvcmUvY29tcG9uZW50cy9kaWFsb2cnO1xuaW1wb3J0IHtwYWlyd2lzZSwgc3RhcnRXaXRofSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtUdWlTaGVldERpYWxvZ0NvbXBvbmVudH0gZnJvbSAnLi9zaGVldC1kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7XG4gICAgVFVJX1NIRUVUX0RJQUxPR19PUFRJT05TLFxuICAgIHR5cGUgVHVpU2hlZXREaWFsb2dPcHRpb25zLFxufSBmcm9tICcuL3NoZWV0LWRpYWxvZy5vcHRpb25zJztcblxuY29uc3QgVEhFTUUgPSAnIzQwNDA0MCc7XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCcsXG4gICAgdXNlRmFjdG9yeTogKCkgPT5cbiAgICAgICAgbmV3IFR1aVNoZWV0RGlhbG9nU2VydmljZShcbiAgICAgICAgICAgIFRVSV9ESUFMT0dTLFxuICAgICAgICAgICAgVHVpU2hlZXREaWFsb2dDb21wb25lbnQsXG4gICAgICAgICAgICBpbmplY3QoVFVJX1NIRUVUX0RJQUxPR19PUFRJT05TKSxcbiAgICAgICAgKSxcbn0pXG5leHBvcnQgY2xhc3MgVHVpU2hlZXREaWFsb2dTZXJ2aWNlIGV4dGVuZHMgVHVpUG9wb3ZlclNlcnZpY2U8VHVpU2hlZXREaWFsb2dPcHRpb25zPGFueT4+IHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRoZW1lID0gaW5qZWN0KFR1aVRoZW1lQ29sb3JTZXJ2aWNlKTtcbiAgICBwcml2YXRlIGluaXRpYWwgPSB0aGlzLnRoZW1lLmNvbG9yO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5ICQgPSB0aGlzLml0ZW1zJFxuICAgICAgICAucGlwZShzdGFydFdpdGgoW10pLCBwYWlyd2lzZSgpLCB0YWtlVW50aWxEZXN0cm95ZWQoKSlcbiAgICAgICAgLnN1YnNjcmliZSgoW3ByZXYsIG5leHRdKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXByZXYubGVuZ3RoICYmIG5leHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsID0gdGhpcy50aGVtZS5jb2xvcjtcbiAgICAgICAgICAgICAgICB0aGlzLnRoZW1lLmNvbG9yID0gVEhFTUU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghbmV4dC5sZW5ndGggJiYgcHJldi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRoZW1lLmNvbG9yID0gdGhpcy5pbml0aWFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn1cbiJdfQ==