import { Directive, inject, Input } from '@angular/core';
import { tuiProvide } from '@taiga-ui/cdk/utils/miscellaneous';
import { TUI_NUMBER_FORMAT } from '@taiga-ui/core/tokens';
import { combineLatest, map, Observable, ReplaySubject } from 'rxjs';
import * as i0 from "@angular/core";
class TuiNumberFormat extends Observable {
    constructor() {
        super((subscriber) => combineLatest([this.parent, this.settings])
            .pipe(map(([parent, settings]) => ({ ...parent, ...settings })))
            .subscribe(subscriber));
        this.settings = new ReplaySubject(1);
        this.parent = inject(TUI_NUMBER_FORMAT, { skipSelf: true });
    }
    set tuiNumberFormat(format) {
        this.settings.next(format);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiNumberFormat, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.2.12", type: TuiNumberFormat, isStandalone: true, selector: "[tuiNumberFormat]", inputs: { tuiNumberFormat: "tuiNumberFormat" }, providers: [tuiProvide(TUI_NUMBER_FORMAT, TuiNumberFormat)], usesInheritance: true, ngImport: i0 }); }
}
export { TuiNumberFormat };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiNumberFormat, decorators: [{
            type: Directive,
            args: [{
                    standalone: true,
                    selector: '[tuiNumberFormat]',
                    providers: [tuiProvide(TUI_NUMBER_FORMAT, TuiNumberFormat)],
                }]
        }], ctorParameters: function () { return []; }, propDecorators: { tuiNumberFormat: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVyLWZvcm1hdC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb3JlL2RpcmVjdGl2ZXMvbnVtYmVyLWZvcm1hdC9udW1iZXItZm9ybWF0LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDdkQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBQzdELE9BQU8sRUFBQyxpQkFBaUIsRUFBK0IsTUFBTSx1QkFBdUIsQ0FBQztBQUN0RixPQUFPLEVBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFDLE1BQU0sTUFBTSxDQUFDOztBQUVuRSxNQUthLGVBQWdCLFNBQVEsVUFBbUM7SUFJcEU7UUFDSSxLQUFLLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUNqQixhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sRUFBRSxHQUFHLFFBQVEsRUFBQyxDQUFDLENBQUMsQ0FBQzthQUM3RCxTQUFTLENBQUMsVUFBVSxDQUFDLENBQzdCLENBQUM7UUFSVyxhQUFRLEdBQUcsSUFBSSxhQUFhLENBQW1DLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLFdBQU0sR0FBRyxNQUFNLENBQUMsaUJBQWlCLEVBQUUsRUFBQyxRQUFRLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztJQVF0RSxDQUFDO0lBRUQsSUFDVyxlQUFlLENBQUMsTUFBd0M7UUFDL0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0IsQ0FBQzsrR0FmUSxlQUFlO21HQUFmLGVBQWUsZ0hBRmIsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsZUFBZSxDQUFDLENBQUM7O1NBRWxELGVBQWU7NEZBQWYsZUFBZTtrQkFMM0IsU0FBUzttQkFBQztvQkFDUCxVQUFVLEVBQUUsSUFBSTtvQkFDaEIsUUFBUSxFQUFFLG1CQUFtQjtvQkFDN0IsU0FBUyxFQUFFLENBQUMsVUFBVSxDQUFDLGlCQUFpQixrQkFBa0IsQ0FBQztpQkFDOUQ7MEVBY2MsZUFBZTtzQkFEekIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlyZWN0aXZlLCBpbmplY3QsIElucHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7dHVpUHJvdmlkZX0gZnJvbSAnQHRhaWdhLXVpL2Nkay91dGlscy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7VFVJX05VTUJFUl9GT1JNQVQsIHR5cGUgVHVpTnVtYmVyRm9ybWF0U2V0dGluZ3N9IGZyb20gJ0B0YWlnYS11aS9jb3JlL3Rva2Vucyc7XG5pbXBvcnQge2NvbWJpbmVMYXRlc3QsIG1hcCwgT2JzZXJ2YWJsZSwgUmVwbGF5U3ViamVjdH0gZnJvbSAncnhqcyc7XG5cbkBEaXJlY3RpdmUoe1xuICAgIHN0YW5kYWxvbmU6IHRydWUsXG4gICAgc2VsZWN0b3I6ICdbdHVpTnVtYmVyRm9ybWF0XScsXG4gICAgcHJvdmlkZXJzOiBbdHVpUHJvdmlkZShUVUlfTlVNQkVSX0ZPUk1BVCwgVHVpTnVtYmVyRm9ybWF0KV0sXG59KVxuZXhwb3J0IGNsYXNzIFR1aU51bWJlckZvcm1hdCBleHRlbmRzIE9ic2VydmFibGU8VHVpTnVtYmVyRm9ybWF0U2V0dGluZ3M+IHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNldHRpbmdzID0gbmV3IFJlcGxheVN1YmplY3Q8UGFydGlhbDxUdWlOdW1iZXJGb3JtYXRTZXR0aW5ncz4+KDEpO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgcGFyZW50ID0gaW5qZWN0KFRVSV9OVU1CRVJfRk9STUFULCB7c2tpcFNlbGY6IHRydWV9KTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigoc3Vic2NyaWJlcikgPT5cbiAgICAgICAgICAgIGNvbWJpbmVMYXRlc3QoW3RoaXMucGFyZW50LCB0aGlzLnNldHRpbmdzXSlcbiAgICAgICAgICAgICAgICAucGlwZShtYXAoKFtwYXJlbnQsIHNldHRpbmdzXSkgPT4gKHsuLi5wYXJlbnQsIC4uLnNldHRpbmdzfSkpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoc3Vic2NyaWJlciksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc2V0IHR1aU51bWJlckZvcm1hdChmb3JtYXQ6IFBhcnRpYWw8VHVpTnVtYmVyRm9ybWF0U2V0dGluZ3M+KSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubmV4dChmb3JtYXQpO1xuICAgIH1cbn1cbiJdfQ==