import { Directive, inject, Input } from '@angular/core';
import { tuiProvide } from '@taiga-ui/cdk/utils/miscellaneous';
import { TUI_DATE_FORMAT } from '@taiga-ui/core/tokens';
import { combineLatest, map, Observable, ReplaySubject } from 'rxjs';
import * as i0 from "@angular/core";
class TuiDateFormat extends Observable {
    constructor() {
        super((subscriber) => combineLatest([this.parent, this.settings])
            .pipe(map(([parent, settings]) => ({ ...parent, ...settings })))
            .subscribe(subscriber));
        this.settings = new ReplaySubject(1);
        this.parent = inject(TUI_DATE_FORMAT, { skipSelf: true });
    }
    set tuiDateFormat(format) {
        this.settings.next(format);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiDateFormat, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.2.12", type: TuiDateFormat, isStandalone: true, selector: "[tuiDateFormat]", inputs: { tuiDateFormat: "tuiDateFormat" }, providers: [tuiProvide(TUI_DATE_FORMAT, TuiDateFormat)], usesInheritance: true, ngImport: i0 }); }
}
export { TuiDateFormat };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiDateFormat, decorators: [{
            type: Directive,
            args: [{
                    standalone: true,
                    selector: '[tuiDateFormat]',
                    providers: [tuiProvide(TUI_DATE_FORMAT, TuiDateFormat)],
                }]
        }], ctorParameters: function () { return []; }, propDecorators: { tuiDateFormat: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1mb3JtYXQuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29yZS9kaXJlY3RpdmVzL2RhdGUtZm9ybWF0L2RhdGUtZm9ybWF0LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDdkQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBQzdELE9BQU8sRUFBQyxlQUFlLEVBQTZCLE1BQU0sdUJBQXVCLENBQUM7QUFDbEYsT0FBTyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBQyxNQUFNLE1BQU0sQ0FBQzs7QUFFbkUsTUFLYSxhQUFjLFNBQVEsVUFBaUM7SUFJaEU7UUFDSSxLQUFLLENBQUMsQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUNqQixhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN0QyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sRUFBRSxHQUFHLFFBQVEsRUFBQyxDQUFDLENBQUMsQ0FBQzthQUM3RCxTQUFTLENBQUMsVUFBVSxDQUFDLENBQzdCLENBQUM7UUFSVyxhQUFRLEdBQUcsSUFBSSxhQUFhLENBQWlDLENBQUMsQ0FBQyxDQUFDO1FBQ2hFLFdBQU0sR0FBRyxNQUFNLENBQUMsZUFBZSxFQUFFLEVBQUMsUUFBUSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7SUFRcEUsQ0FBQztJQUVELElBQ1csYUFBYSxDQUFDLE1BQXNDO1FBQzNELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUM7K0dBZlEsYUFBYTttR0FBYixhQUFhLDBHQUZYLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQzs7U0FFOUMsYUFBYTs0RkFBYixhQUFhO2tCQUx6QixTQUFTO21CQUFDO29CQUNQLFVBQVUsRUFBRSxJQUFJO29CQUNoQixRQUFRLEVBQUUsaUJBQWlCO29CQUMzQixTQUFTLEVBQUUsQ0FBQyxVQUFVLENBQUMsZUFBZSxnQkFBZ0IsQ0FBQztpQkFDMUQ7MEVBY2MsYUFBYTtzQkFEdkIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlyZWN0aXZlLCBpbmplY3QsIElucHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7dHVpUHJvdmlkZX0gZnJvbSAnQHRhaWdhLXVpL2Nkay91dGlscy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7VFVJX0RBVEVfRk9STUFULCB0eXBlIFR1aURhdGVGb3JtYXRTZXR0aW5nc30gZnJvbSAnQHRhaWdhLXVpL2NvcmUvdG9rZW5zJztcbmltcG9ydCB7Y29tYmluZUxhdGVzdCwgbWFwLCBPYnNlcnZhYmxlLCBSZXBsYXlTdWJqZWN0fSBmcm9tICdyeGpzJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgICBzZWxlY3RvcjogJ1t0dWlEYXRlRm9ybWF0XScsXG4gICAgcHJvdmlkZXJzOiBbdHVpUHJvdmlkZShUVUlfREFURV9GT1JNQVQsIFR1aURhdGVGb3JtYXQpXSxcbn0pXG5leHBvcnQgY2xhc3MgVHVpRGF0ZUZvcm1hdCBleHRlbmRzIE9ic2VydmFibGU8VHVpRGF0ZUZvcm1hdFNldHRpbmdzPiB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzZXR0aW5ncyA9IG5ldyBSZXBsYXlTdWJqZWN0PFBhcnRpYWw8VHVpRGF0ZUZvcm1hdFNldHRpbmdzPj4oMSk7XG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXJlbnQgPSBpbmplY3QoVFVJX0RBVEVfRk9STUFULCB7c2tpcFNlbGY6IHRydWV9KTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigoc3Vic2NyaWJlcikgPT5cbiAgICAgICAgICAgIGNvbWJpbmVMYXRlc3QoW3RoaXMucGFyZW50LCB0aGlzLnNldHRpbmdzXSlcbiAgICAgICAgICAgICAgICAucGlwZShtYXAoKFtwYXJlbnQsIHNldHRpbmdzXSkgPT4gKHsuLi5wYXJlbnQsIC4uLnNldHRpbmdzfSkpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoc3Vic2NyaWJlciksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc2V0IHR1aURhdGVGb3JtYXQoZm9ybWF0OiBQYXJ0aWFsPFR1aURhdGVGb3JtYXRTZXR0aW5ncz4pIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5uZXh0KGZvcm1hdCk7XG4gICAgfVxufVxuIl19