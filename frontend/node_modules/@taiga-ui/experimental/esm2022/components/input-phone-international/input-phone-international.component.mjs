import { NgForOf, NgIf } from '@angular/common';
import { ChangeDetectionStrategy, Component, computed, effect, ElementRef, inject, Input, Output, signal, ViewChildren, ViewEncapsulation, } from '@angular/core';
import { takeUntilDestroyed, toObservable, toSignal } from '@angular/core/rxjs-interop';
import { FormsModule } from '@angular/forms';
import { MaskitoDirective } from '@maskito/angular';
import { MASKITO_DEFAULT_OPTIONS, maskitoInitialCalibrationPlugin, maskitoTransform, } from '@maskito/core';
import { maskitoGetCountryFromNumber, maskitoPhoneOptionsGenerator } from '@maskito/phone';
import { tuiAsControl, TuiControl } from '@taiga-ui/cdk/classes';
import { CHAR_PLUS, EMPTY_QUERY, TUI_ALLOW_SIGNAL_WRITES, TUI_DEFAULT_MATCHER, } from '@taiga-ui/cdk/constants';
import { TuiActiveZone } from '@taiga-ui/cdk/directives/active-zone';
import { TuiAutoFocus, tuiAutoFocusOptionsProvider, } from '@taiga-ui/cdk/directives/auto-focus';
import { TUI_IS_IOS, tuiFallbackValueProvider } from '@taiga-ui/cdk/tokens';
import { tuiInjectElement, tuiIsInputEvent, tuiValue } from '@taiga-ui/cdk/utils/dom';
import { tuiDirectiveBinding } from '@taiga-ui/cdk/utils/miscellaneous';
import { TuiButton } from '@taiga-ui/core/components/button';
import { TuiDataList, TuiOptionNew } from '@taiga-ui/core/components/data-list';
import { TUI_TEXTFIELD_OPTIONS, TuiTextfield, TuiTextfieldContent, TuiWithTextfield, } from '@taiga-ui/core/components/textfield';
import { TuiDropdownOpen, tuiDropdownOpen } from '@taiga-ui/core/directives/dropdown';
import { TuiTitle } from '@taiga-ui/core/directives/title';
import { TuiFlagPipe } from '@taiga-ui/core/pipes';
import { TUI_COMMON_ICONS } from '@taiga-ui/core/tokens';
import { TUI_INPUT_PHONE_INTERNATIONAL_OPTIONS } from '@taiga-ui/kit/components/input-phone-international';
import { TuiChevron } from '@taiga-ui/kit/directives/chevron';
import { TUI_COUNTRIES, TUI_INTERNATIONAL_SEARCH } from '@taiga-ui/kit/tokens';
import { tuiGetCallingCode, tuiMaskito } from '@taiga-ui/kit/utils';
import { TuiCell } from '@taiga-ui/layout/components/cell';
import { validatePhoneNumberLength } from 'libphonenumber-js';
import { filter, from, skip } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@maskito/angular";
import * as i2 from "@taiga-ui/core/components/textfield";
import * as i3 from "@angular/forms";
import * as i4 from "@taiga-ui/core/components/data-list";
const NOT_FORM_CONTROL_SYMBOLS = /[^+\d]/g;
class TuiInputPhoneInternational extends TuiControl {
    constructor() {
        super(...arguments);
        this.list = EMPTY_QUERY;
        this.el = tuiInjectElement();
        this.ios = inject(TUI_IS_IOS);
        this.icons = inject(TUI_COMMON_ICONS);
        this.options = inject(TUI_INPUT_PHONE_INTERNATIONAL_OPTIONS);
        this.countries = signal(this.options.countries);
        this.code = signal(this.options.countryIsoCode);
        this.label = toSignal(inject(TUI_INTERNATIONAL_SEARCH));
        this.metadata = toSignal(from(this.options.metadata));
        this.names = toSignal(inject(TUI_COUNTRIES));
        this.open = tuiDropdownOpen();
        this.search = signal('');
        this.size = inject(TUI_TEXTFIELD_OPTIONS).size;
        this.mask = tuiMaskito(computed(() => this.computeMask(this.code(), this.metadata())));
        this.masked = tuiValue(this.el);
        this.valueChangeEffect = effect(() => {
            this.onChange(this.unmask(this.masked()));
        }, TUI_ALLOW_SIGNAL_WRITES);
        this.filtered = computed(() => this.countries()
            .map((iso) => ({
            iso,
            name: this.names()?.[iso] || '',
            code: tuiGetCallingCode(iso, this.metadata()),
        }))
            .filter(({ name, code }) => TUI_DEFAULT_MATCHER(name + code, this.search())));
        this.enabled = tuiDirectiveBinding(TuiDropdownOpen, 'tuiDropdownEnabled', this.interactive, {});
        this.$ = inject(TuiActiveZone)
            .tuiActiveZoneChange.pipe(filter(() => !this.readOnly()), takeUntilDestroyed())
            .subscribe((active) => {
            const prefix = `${tuiGetCallingCode(this.code(), this.metadata())} `;
            this.search.set('');
            this.masked.update((value) => {
                const fallback = active ? value || prefix : value;
                return value === prefix ? '' : fallback;
            });
        });
        this.countrySearch = false;
        this.countryIsoCodeChange = toObservable(this.code).pipe(skip(1));
    }
    set countriesValue(value) {
        this.countries.set(value);
    }
    set isoCode(code) {
        this.code.set(code);
    }
    writeValue(unmasked) {
        const code = this.getCountryCode(unmasked ?? '');
        if (code) {
            this.code.set(code);
        }
        super.writeValue(unmasked);
        this.masked.set(maskitoTransform(this.value() ?? '', this.mask() || MASKITO_DEFAULT_OPTIONS));
    }
    onPaste(event) {
        const data = tuiIsInputEvent(event) && event.data;
        if (!data ||
            (!event.inputType.includes('Drop') && !event.inputType.includes('Paste'))) {
            return;
        }
        const code = this.getCountryCode(data);
        if (code) {
            this.code.set(code);
        }
    }
    onItemClick(code) {
        this.el.focus();
        this.open.set(false);
        this.code.set(code);
        this.search.set('');
        this.masked.set(maskitoTransform(this.value() || tuiGetCallingCode(code, this.metadata()), this.mask() || MASKITO_DEFAULT_OPTIONS));
    }
    computeMask(countryIsoCode, metadata) {
        if (!metadata) {
            return null;
        }
        const { plugins, ...options } = maskitoPhoneOptionsGenerator({
            countryIsoCode,
            metadata,
            separator: this.options.separator,
        });
        return {
            ...options,
            plugins: [...plugins, maskitoInitialCalibrationPlugin()],
        };
    }
    unmask(maskedValue) {
        const value = maskedValue.replaceAll(NOT_FORM_CONTROL_SYMBOLS, '');
        return value === tuiGetCallingCode(this.code(), this.metadata()) ? '' : value;
    }
    getCountryCode(value) {
        const metadata = this.metadata();
        const phone = value.startsWith(CHAR_PLUS) ? value : CHAR_PLUS + value;
        return metadata && validatePhoneNumberLength(phone) !== 'TOO_SHORT'
            ? (maskitoGetCountryFromNumber(phone, metadata) ?? null)
            : null;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiInputPhoneInternational, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TuiInputPhoneInternational, isStandalone: true, selector: "input[tuiInputPhoneInternational]", inputs: { countrySearch: "countrySearch", countriesValue: ["countries", "countriesValue"], isoCode: ["countryIsoCode", "isoCode"] }, outputs: { countryIsoCodeChange: "countryIsoCodeChange" }, host: { attributes: { "type": "tel", "ngSkipHydration": "true" }, listeners: { "input": "masked.set($event.target.value)", "click": "open.set(false)", "beforeinput.capture": "onPaste($event)" }, properties: { "attr.inputmode": "!ios && open() ? \"none\" : null", "disabled": "disabled()" } }, providers: [
            tuiAsControl(TuiInputPhoneInternational),
            tuiFallbackValueProvider(''),
            tuiAutoFocusOptionsProvider({ preventScroll: true }),
        ], viewQueries: [{ propertyName: "list", predicate: TuiOptionNew, descendants: true, read: ElementRef }], usesInheritance: true, hostDirectives: [{ directive: i1.MaskitoDirective }, { directive: i2.TuiWithTextfield }], ngImport: i0, template: "<ng-container *tuiTextfieldContent>\n    <button\n        appearance=\"textfield\"\n        tabindex=\"-1\"\n        tuiButton\n        tuiChevron\n        type=\"button\"\n        class=\"t-ipi-select\"\n        [attr.data-mode]=\"mode()\"\n        [class.t-ipi-select_readonly]=\"readOnly()\"\n        [disabled]=\"disabled()\"\n        [size]=\"size()\"\n        [tuiAppearanceFocus]=\"open()\"\n        (pointerdown.prevent)=\"interactive() && open.set(!open())\"\n    >\n        <img\n            class=\"t-ipi-flag\"\n            [alt]=\"names()?.[code()]\"\n            [class.t-ipi-flag_small]=\"size() === 's'\"\n            [src]=\"code() | tuiFlag\"\n        />\n    </button>\n</ng-container>\n<ng-container *tuiTextfieldDropdown>\n    <div\n        *ngIf=\"countrySearch\"\n        #element\n        class=\"t-ipi-search\"\n    >\n        <tui-textfield\n            [iconStart]=\"icons.search\"\n            [tuiTextfieldSize]=\"size() === 's' ? 's' : 'm'\"\n        >\n            <input\n                autocomplete=\"off\"\n                tuiTextfield\n                type=\"text\"\n                [focused]=\"true\"\n                [ngModel]=\"search()\"\n                [ngModelOptions]=\"{standalone: true}\"\n                [placeholder]=\"label()\"\n                [tuiAutoFocus]=\"!!element.closest('tui-dropdown-mobile')\"\n                (keydown.arrowDown)=\"list.get(0)?.nativeElement?.focus()\"\n                (ngModelChange)=\"search.set($event)\"\n            />\n        </tui-textfield>\n    </div>\n\n    <tui-data-list class=\"t-ipi-options\">\n        <button\n            *ngFor=\"let item of filtered()\"\n            new\n            tuiOption\n            type=\"button\"\n            [tuiCell]=\"size()\"\n            (click)=\"onItemClick(item.iso)\"\n        >\n            <img\n                alt=\"\"\n                class=\"t-ipi-flag\"\n                [class.t-ipi-flag_small]=\"size() === 's'\"\n                [src]=\"item.iso | tuiFlag\"\n            />\n            <span tuiTitle>{{ item.name }}</span>\n            <span class=\"t-ipi-code\">{{ item.code }}</span>\n        </button>\n    </tui-data-list>\n</ng-container>\n", styles: ["[tuiInputPhoneInternational][tuiInputPhoneInternational]{left:var(--t-offset);border-top-left-radius:0;border-bottom-left-radius:0;inline-size:calc(100% - var(--t-offset))}tui-root:has(tui-dropdown-mobile) [tuiInputPhoneInternational][tuiInputPhoneInternational]{caret-color:transparent}[tuiInputPhoneInternational][tuiInputPhoneInternational]+label{padding-inline-start:var(--t-offset)}tui-textfield[data-size=s]{--t-offset: 4.125rem}tui-textfield[data-size=s] .t-ipi-flag{margin:0 .1875rem}tui-textfield[data-size=m]{--t-offset: 4.875rem}tui-textfield[data-size=m] .t-ipi-flag{margin:0 -.1875rem}tui-textfield[data-size=l]{--t-offset: 5.25rem}tui-textfield[data-size=l] .t-ipi-flag{margin:0 -.1875rem}tui-textfield .t-ipi-select{position:absolute;left:0;border-radius:inherit;border-top-right-radius:0;border-bottom-right-radius:0}tui-textfield .t-ipi-select_readonly{pointer-events:none}.t-ipi-flag{inline-size:1.75rem;block-size:1.75rem;border-radius:100%}.t-ipi-flag_small{inline-size:1.25rem;block-size:1.25rem}.t-ipi-code{color:var(--tui-text-secondary)}.t-ipi-search{position:sticky;top:0;z-index:1;background:var(--tui-background-elevation-3);padding:.375rem .375rem 0}@supports (-webkit-touch-callout: none){.t-ipi-search input:focus{animation:tuiPreventIOSScroll 1ms}}@keyframes tuiPreventIOSScroll{0%{opacity:0}to{opacity:1}}tui-dropdown-mobile .t-ipi-search{background:var(--tui-background-elevation-1)}tui-dropdown-mobile .t-ipi-options:not(:first-child){min-block-size:calc(100 * var(--tui-viewport-vh) - 8.75rem)}\n"], dependencies: [{ kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: TuiAutoFocus, selector: "[tuiAutoFocus]", inputs: ["tuiAutoFocus"] }, { kind: "directive", type: TuiButton, selector: "a[tuiButton],button[tuiButton],a[tuiIconButton],button[tuiIconButton]", inputs: ["size"] }, { kind: "directive", type: TuiCell, selector: "[tuiCell]:not(ng-template)", inputs: ["tuiCell", "tuiCellHeight"] }, { kind: "directive", type: TuiChevron, selector: "[tuiChevron]", inputs: ["tuiChevron"] }, { kind: "component", type: i4.TuiDataListComponent, selector: "tui-data-list", inputs: ["emptyContent", "size"] }, { kind: "directive", type: i4.TuiOptionNew, selector: "button[tuiOption][new], a[tuiOption][new], label[tuiOption][new]", inputs: ["disabled"] }, { kind: "pipe", type: TuiFlagPipe, name: "tuiFlag" }, { kind: "component", type: i2.TuiTextfieldComponent, selector: "tui-textfield:not([multi])" }, { kind: "directive", type: i2.TuiTextfieldDirective, selector: "input[tuiTextfield]:not([tuiInputCard]):not([tuiInputExpire]):not([tuiInputCVC])" }, { kind: "directive", type: i2.TuiTextfieldOptionsDirective, selector: "[tuiTextfieldAppearance],[tuiTextfieldSize],[tuiTextfieldCleaner]", inputs: ["tuiTextfieldAppearance", "tuiTextfieldSize", "tuiTextfieldCleaner"] }, { kind: "directive", type: i2.TuiTextfieldDropdownDirective, selector: "ng-template[tuiTextfieldDropdown]" }, { kind: "directive", type: TuiTextfieldContent, selector: "ng-template[tuiTextfieldContent]" }, { kind: "directive", type: TuiTitle, selector: "[tuiTitle]", inputs: ["tuiTitle"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None }); }
}
export { TuiInputPhoneInternational };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiInputPhoneInternational, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'input[tuiInputPhoneInternational]', imports: [
                        FormsModule,
                        NgForOf,
                        NgIf,
                        TuiAutoFocus,
                        TuiButton,
                        TuiCell,
                        TuiChevron,
                        TuiDataList,
                        TuiFlagPipe,
                        TuiTextfield,
                        TuiTextfieldContent,
                        TuiTitle,
                    ], encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, providers: [
                        tuiAsControl(TuiInputPhoneInternational),
                        tuiFallbackValueProvider(''),
                        tuiAutoFocusOptionsProvider({ preventScroll: true }),
                    ], hostDirectives: [MaskitoDirective, TuiWithTextfield], host: {
                        type: 'tel',
                        ngSkipHydration: 'true',
                        '[attr.inputmode]': '!ios && open() ? "none" : null',
                        '[disabled]': 'disabled()',
                        '(input)': 'masked.set($event.target.value)',
                        '(click)': 'open.set(false)',
                        '(beforeinput.capture)': 'onPaste($event)',
                    }, template: "<ng-container *tuiTextfieldContent>\n    <button\n        appearance=\"textfield\"\n        tabindex=\"-1\"\n        tuiButton\n        tuiChevron\n        type=\"button\"\n        class=\"t-ipi-select\"\n        [attr.data-mode]=\"mode()\"\n        [class.t-ipi-select_readonly]=\"readOnly()\"\n        [disabled]=\"disabled()\"\n        [size]=\"size()\"\n        [tuiAppearanceFocus]=\"open()\"\n        (pointerdown.prevent)=\"interactive() && open.set(!open())\"\n    >\n        <img\n            class=\"t-ipi-flag\"\n            [alt]=\"names()?.[code()]\"\n            [class.t-ipi-flag_small]=\"size() === 's'\"\n            [src]=\"code() | tuiFlag\"\n        />\n    </button>\n</ng-container>\n<ng-container *tuiTextfieldDropdown>\n    <div\n        *ngIf=\"countrySearch\"\n        #element\n        class=\"t-ipi-search\"\n    >\n        <tui-textfield\n            [iconStart]=\"icons.search\"\n            [tuiTextfieldSize]=\"size() === 's' ? 's' : 'm'\"\n        >\n            <input\n                autocomplete=\"off\"\n                tuiTextfield\n                type=\"text\"\n                [focused]=\"true\"\n                [ngModel]=\"search()\"\n                [ngModelOptions]=\"{standalone: true}\"\n                [placeholder]=\"label()\"\n                [tuiAutoFocus]=\"!!element.closest('tui-dropdown-mobile')\"\n                (keydown.arrowDown)=\"list.get(0)?.nativeElement?.focus()\"\n                (ngModelChange)=\"search.set($event)\"\n            />\n        </tui-textfield>\n    </div>\n\n    <tui-data-list class=\"t-ipi-options\">\n        <button\n            *ngFor=\"let item of filtered()\"\n            new\n            tuiOption\n            type=\"button\"\n            [tuiCell]=\"size()\"\n            (click)=\"onItemClick(item.iso)\"\n        >\n            <img\n                alt=\"\"\n                class=\"t-ipi-flag\"\n                [class.t-ipi-flag_small]=\"size() === 's'\"\n                [src]=\"item.iso | tuiFlag\"\n            />\n            <span tuiTitle>{{ item.name }}</span>\n            <span class=\"t-ipi-code\">{{ item.code }}</span>\n        </button>\n    </tui-data-list>\n</ng-container>\n", styles: ["[tuiInputPhoneInternational][tuiInputPhoneInternational]{left:var(--t-offset);border-top-left-radius:0;border-bottom-left-radius:0;inline-size:calc(100% - var(--t-offset))}tui-root:has(tui-dropdown-mobile) [tuiInputPhoneInternational][tuiInputPhoneInternational]{caret-color:transparent}[tuiInputPhoneInternational][tuiInputPhoneInternational]+label{padding-inline-start:var(--t-offset)}tui-textfield[data-size=s]{--t-offset: 4.125rem}tui-textfield[data-size=s] .t-ipi-flag{margin:0 .1875rem}tui-textfield[data-size=m]{--t-offset: 4.875rem}tui-textfield[data-size=m] .t-ipi-flag{margin:0 -.1875rem}tui-textfield[data-size=l]{--t-offset: 5.25rem}tui-textfield[data-size=l] .t-ipi-flag{margin:0 -.1875rem}tui-textfield .t-ipi-select{position:absolute;left:0;border-radius:inherit;border-top-right-radius:0;border-bottom-right-radius:0}tui-textfield .t-ipi-select_readonly{pointer-events:none}.t-ipi-flag{inline-size:1.75rem;block-size:1.75rem;border-radius:100%}.t-ipi-flag_small{inline-size:1.25rem;block-size:1.25rem}.t-ipi-code{color:var(--tui-text-secondary)}.t-ipi-search{position:sticky;top:0;z-index:1;background:var(--tui-background-elevation-3);padding:.375rem .375rem 0}@supports (-webkit-touch-callout: none){.t-ipi-search input:focus{animation:tuiPreventIOSScroll 1ms}}@keyframes tuiPreventIOSScroll{0%{opacity:0}to{opacity:1}}tui-dropdown-mobile .t-ipi-search{background:var(--tui-background-elevation-1)}tui-dropdown-mobile .t-ipi-options:not(:first-child){min-block-size:calc(100 * var(--tui-viewport-vh) - 8.75rem)}\n"] }]
        }], propDecorators: { list: [{
                type: ViewChildren,
                args: [TuiOptionNew, { read: ElementRef }]
            }], countrySearch: [{
                type: Input
            }], countryIsoCodeChange: [{
                type: Output
            }], countriesValue: [{
                type: Input,
                args: ['countries']
            }], isoCode: [{
                type: Input,
                args: ['countryIsoCode']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtcGhvbmUtaW50ZXJuYXRpb25hbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9leHBlcmltZW50YWwvY29tcG9uZW50cy9pbnB1dC1waG9uZS1pbnRlcm5hdGlvbmFsL2lucHV0LXBob25lLWludGVybmF0aW9uYWwuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvZXhwZXJpbWVudGFsL2NvbXBvbmVudHMvaW5wdXQtcGhvbmUtaW50ZXJuYXRpb25hbC9pbnB1dC1waG9uZS1pbnRlcm5hdGlvbmFsLnRlbXBsYXRlLmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM5QyxPQUFPLEVBQ0gsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxRQUFRLEVBQ1IsTUFBTSxFQUNOLFVBQVUsRUFDVixNQUFNLEVBQ04sS0FBSyxFQUNMLE1BQU0sRUFFTixNQUFNLEVBQ04sWUFBWSxFQUNaLGlCQUFpQixHQUNwQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMsa0JBQWtCLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBQ3RGLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQ0gsdUJBQXVCLEVBQ3ZCLCtCQUErQixFQUUvQixnQkFBZ0IsR0FDbkIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLDJCQUEyQixFQUFFLDRCQUE0QixFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFDLFlBQVksRUFBRSxVQUFVLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMvRCxPQUFPLEVBQ0gsU0FBUyxFQUNU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O3FCQUM3Qzs4QkFJa0IsSUFBSTtzQkFEdEIsWUFBWTt1QkFBQyxZQUFZLEVBQUUsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFDO2dCQTREdkMsYUFBYTtzQkFEbkIsS0FBSztnQkFJVSxvQkFBb0I7c0JBRG5DLE1BQU07Z0JBSUksY0FBYztzQkFEeEIsS0FBSzt1QkFBQyxXQUFXO2dCQU1QLE9BQU87c0JBRGpCLEtBQUs7dUJBQUMsZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtOZ0Zvck9mLCBOZ0lmfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgICBDb21wb25lbnQsXG4gICAgY29tcHV0ZWQsXG4gICAgZWZmZWN0LFxuICAgIEVsZW1lbnRSZWYsXG4gICAgaW5qZWN0LFxuICAgIElucHV0LFxuICAgIE91dHB1dCxcbiAgICB0eXBlIFF1ZXJ5TGlzdCxcbiAgICBzaWduYWwsXG4gICAgVmlld0NoaWxkcmVuLFxuICAgIFZpZXdFbmNhcHN1bGF0aW9uLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7dGFrZVVudGlsRGVzdHJveWVkLCB0b09ic2VydmFibGUsIHRvU2lnbmFsfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCc7XG5pbXBvcnQge0Zvcm1zTW9kdWxlfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge01hc2tpdG9EaXJlY3RpdmV9IGZyb20gJ0BtYXNraXRvL2FuZ3VsYXInO1xuaW1wb3J0IHtcbiAgICBNQVNLSVRPX0RFRkFVTFRfT1BUSU9OUyxcbiAgICBtYXNraXRvSW5pdGlhbENhbGlicmF0aW9uUGx1Z2luLFxuICAgIHR5cGUgTWFza2l0b09wdGlvbnMsXG4gICAgbWFza2l0b1RyYW5zZm9ybSxcbn0gZnJvbSAnQG1hc2tpdG8vY29yZSc7XG5pbXBvcnQge21hc2tpdG9HZXRDb3VudHJ5RnJvbU51bWJlciwgbWFza2l0b1Bob25lT3B0aW9uc0dlbmVyYXRvcn0gZnJvbSAnQG1hc2tpdG8vcGhvbmUnO1xuaW1wb3J0IHt0dWlBc0NvbnRyb2wsIFR1aUNvbnRyb2x9IGZyb20gJ0B0YWlnYS11aS9jZGsvY2xhc3Nlcyc7XG5pbXBvcnQge1xuICAgIENIQVJfUExVUyxcbiAgICBFTVBUWV9RVUVSWSxcbiAgICBUVUlfQUxMT1dfU0lHTkFMX1dSSVRFUyxcbiAgICBUVUlfREVGQVVMVF9NQVRDSEVSLFxufSBmcm9tICdAdGFpZ2EtdWkvY2RrL2NvbnN0YW50cyc7XG5pbXBvcnQge1R1aUFjdGl2ZVpvbmV9IGZyb20gJ0B0YWlnYS11aS9jZGsvZGlyZWN0aXZlcy9hY3RpdmUtem9uZSc7XG5pbXBvcnQge1xuICAgIFR1aUF1dG9Gb2N1cyxcbiAgICB0dWlBdXRvRm9jdXNPcHRpb25zUHJvdmlkZXIsXG59IGZyb20gJ0B0YWlnYS11aS9jZGsvZGlyZWN0aXZlcy9hdXRvLWZvY3VzJztcbmltcG9ydCB7VFVJX0lTX0lPUywgdHVpRmFsbGJhY2tWYWx1ZVByb3ZpZGVyfSBmcm9tICdAdGFpZ2EtdWkvY2RrL3Rva2Vucyc7XG5pbXBvcnQge3R1aUluamVjdEVsZW1lbnQsIHR1aUlzSW5wdXRFdmVudCwgdHVpVmFsdWV9IGZyb20gJ0B0YWlnYS11aS9jZGsvdXRpbHMvZG9tJztcbmltcG9ydCB7dHVpRGlyZWN0aXZlQmluZGluZ30gZnJvbSAnQHRhaWdhLXVpL2Nkay91dGlscy9taXNjZWxsYW5lb3VzJztcbmltcG9ydCB7VHVpQnV0dG9ufSBmcm9tICdAdGFpZ2EtdWkvY29yZS9jb21wb25lbnRzL2J1dHRvbic7XG5pbXBvcnQge1R1aURhdGFMaXN0LCBUdWlPcHRpb25OZXd9IGZyb20gJ0B0YWlnYS11aS9jb3JlL2NvbXBvbmVudHMvZGF0YS1saXN0JztcbmltcG9ydCB7XG4gICAgVFVJX1RFWFRGSUVMRF9PUFRJT05TLFxuICAgIFR1aVRleHRmaWVsZCxcbiAgICBUdWlUZXh0ZmllbGRDb250ZW50LFxuICAgIFR1aVdpdGhUZXh0ZmllbGQsXG59IGZyb20gJ0B0YWlnYS11aS9jb3JlL2NvbXBvbmVudHMvdGV4dGZpZWxkJztcbmltcG9ydCB7VHVpRHJvcGRvd25PcGVuLCB0dWlEcm9wZG93bk9wZW59IGZyb20gJ0B0YWlnYS11aS9jb3JlL2RpcmVjdGl2ZXMvZHJvcGRvd24nO1xuaW1wb3J0IHtUdWlUaXRsZX0gZnJvbSAnQHRhaWdhLXVpL2NvcmUvZGlyZWN0aXZlcy90aXRsZSc7XG5pbXBvcnQge1R1aUZsYWdQaXBlfSBmcm9tICdAdGFpZ2EtdWkvY29yZS9waXBlcyc7XG5pbXBvcnQge1RVSV9DT01NT05fSUNPTlN9IGZyb20gJ0B0YWlnYS11aS9jb3JlL3Rva2Vucyc7XG5pbXBvcnQge3R5cGUgVHVpQ291bnRyeUlzb0NvZGV9IGZyb20gJ0B0YWlnYS11aS9pMThuL3R5cGVzJztcbmltcG9ydCB7VFVJX0lOUFVUX1BIT05FX0lOVEVSTkFUSU9OQUxfT1BUSU9OU30gZnJvbSAnQHRhaWdhLXVpL2tpdC9jb21wb25lbnRzL2lucHV0LXBob25lLWludGVybmF0aW9uYWwnO1xuaW1wb3J0IHtUdWlDaGV2cm9ufSBmcm9tICdAdGFpZ2EtdWkva2l0L2RpcmVjdGl2ZXMvY2hldnJvbic7XG5pbXBvcnQge1RVSV9DT1VOVFJJRVMsIFRVSV9JTlRFUk5BVElPTkFMX1NFQVJDSH0gZnJvbSAnQHRhaWdhLXVpL2tpdC90b2tlbnMnO1xuaW1wb3J0IHt0dWlHZXRDYWxsaW5nQ29kZSwgdHVpTWFza2l0b30gZnJvbSAnQHRhaWdhLXVpL2tpdC91dGlscyc7XG5pbXBvcnQge1R1aUNlbGx9IGZyb20gJ0B0YWlnYS11aS9sYXlvdXQvY29tcG9uZW50cy9jZWxsJztcbmltcG9ydCB7dmFsaWRhdGVQaG9uZU51bWJlckxlbmd0aH0gZnJvbSAnbGlicGhvbmVudW1iZXItanMnO1xuaW1wb3J0IHt0eXBlIE1ldGFkYXRhSnNvbn0gZnJvbSAnbGlicGhvbmVudW1iZXItanMvY29yZSc7XG5pbXBvcnQge2ZpbHRlciwgZnJvbSwgc2tpcH0gZnJvbSAncnhqcyc7XG5cbmNvbnN0IE5PVF9GT1JNX0NPTlRST0xfU1lNQk9MUyA9IC9bXitcXGRdL2c7XG5cbkBDb21wb25lbnQoe1xuICAgIHN0YW5kYWxvbmU6IHRydWUsXG4gICAgc2VsZWN0b3I6ICdpbnB1dFt0dWlJbnB1dFBob25lSW50ZXJuYXRpb25hbF0nLFxuICAgIGltcG9ydHM6IFtcbiAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgIE5nRm9yT2YsXG4gICAgICAgIE5nSWYsXG4gICAgICAgIFR1aUF1dG9Gb2N1cyxcbiAgICAgICAgVHVpQnV0dG9uLFxuICAgICAgICBUdWlDZWxsLFxuICAgICAgICBUdWlDaGV2cm9uLFxuICAgICAgICBUdWlEYXRhTGlzdCxcbiAgICAgICAgVHVpRmxhZ1BpcGUsXG4gICAgICAgIFR1aVRleHRmaWVsZCxcbiAgICAgICAgVHVpVGV4dGZpZWxkQ29udGVudCxcbiAgICAgICAgVHVpVGl0bGUsXG4gICAgXSxcbiAgICB0ZW1wbGF0ZVVybDogJy4vaW5wdXQtcGhvbmUtaW50ZXJuYXRpb25hbC50ZW1wbGF0ZS5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9pbnB1dC1waG9uZS1pbnRlcm5hdGlvbmFsLnN0eWxlLmxlc3MnXSxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICB0dWlBc0NvbnRyb2woVHVpSW5wdXRQaG9uZUludGVybmF0aW9uYWwpLFxuICAgICAgICB0dWlGYWxsYmFja1ZhbHVlUHJvdmlkZXIoJycpLFxuICAgICAgICB0dWlBdXRvRm9jdXNPcHRpb25zUHJvdmlkZXIoe3ByZXZlbnRTY3JvbGw6IHRydWV9KSxcbiAgICBdLFxuICAgIGhvc3REaXJlY3RpdmVzOiBbTWFza2l0b0RpcmVjdGl2ZSwgVHVpV2l0aFRleHRmaWVsZF0sXG4gICAgaG9zdDoge1xuICAgICAgICB0eXBlOiAndGVsJyxcbiAgICAgICAgbmdTa2lwSHlkcmF0aW9uOiAndHJ1ZScsXG4gICAgICAgICdbYXR0ci5pbnB1dG1vZGVdJzogJyFpb3MgJiYgb3BlbigpID8gXCJub25lXCIgOiBudWxsJyxcbiAgICAgICAgJ1tkaXNhYmxlZF0nOiAnZGlzYWJsZWQoKScsXG4gICAgICAgICcoaW5wdXQpJzogJ21hc2tlZC5zZXQoJGV2ZW50LnRhcmdldC52YWx1ZSknLFxuICAgICAgICAnKGNsaWNrKSc6ICdvcGVuLnNldChmYWxzZSknLFxuICAgICAgICAnKGJlZm9yZWlucHV0LmNhcHR1cmUpJzogJ29uUGFzdGUoJGV2ZW50KScsXG4gICAgfSxcbn0pXG5leHBvcnQgY2xhc3MgVHVpSW5wdXRQaG9uZUludGVybmF0aW9uYWwgZXh0ZW5kcyBUdWlDb250cm9sPHN0cmluZz4ge1xuICAgIEBWaWV3Q2hpbGRyZW4oVHVpT3B0aW9uTmV3LCB7cmVhZDogRWxlbWVudFJlZn0pXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGxpc3Q6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPEhUTUxCdXR0b25FbGVtZW50Pj4gPSBFTVBUWV9RVUVSWTtcblxuICAgIHByb3RlY3RlZCByZWFkb25seSBlbCA9IHR1aUluamVjdEVsZW1lbnQ8SFRNTElucHV0RWxlbWVudD4oKTtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgaW9zID0gaW5qZWN0KFRVSV9JU19JT1MpO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBpY29ucyA9IGluamVjdChUVUlfQ09NTU9OX0lDT05TKTtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3B0aW9ucyA9IGluamVjdChUVUlfSU5QVVRfUEhPTkVfSU5URVJOQVRJT05BTF9PUFRJT05TKTtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY291bnRyaWVzID0gc2lnbmFsKHRoaXMub3B0aW9ucy5jb3VudHJpZXMpO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBjb2RlID0gc2lnbmFsKHRoaXMub3B0aW9ucy5jb3VudHJ5SXNvQ29kZSk7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGxhYmVsID0gdG9TaWduYWwoaW5qZWN0KFRVSV9JTlRFUk5BVElPTkFMX1NFQVJDSCkpO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBtZXRhZGF0YSA9IHRvU2lnbmFsKGZyb20odGhpcy5vcHRpb25zLm1ldGFkYXRhKSk7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IG5hbWVzID0gdG9TaWduYWwoaW5qZWN0KFRVSV9DT1VOVFJJRVMpKTtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3BlbiA9IHR1aURyb3Bkb3duT3BlbigpO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBzZWFyY2ggPSBzaWduYWw8c3RyaW5nPignJyk7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IHNpemUgPSBpbmplY3QoVFVJX1RFWFRGSUVMRF9PUFRJT05TKS5zaXplO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IG1hc2sgPSB0dWlNYXNraXRvKFxuICAgICAgICBjb21wdXRlZCgoKSA9PiB0aGlzLmNvbXB1dGVNYXNrKHRoaXMuY29kZSgpLCB0aGlzLm1ldGFkYXRhKCkpKSxcbiAgICApO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IG1hc2tlZCA9IHR1aVZhbHVlKHRoaXMuZWwpO1xuXG4gICAgcHJvdGVjdGVkIHZhbHVlQ2hhbmdlRWZmZWN0ID0gZWZmZWN0KCgpID0+IHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLnVubWFzayh0aGlzLm1hc2tlZCgpKSk7XG4gICAgfSwgVFVJX0FMTE9XX1NJR05BTF9XUklURVMpO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGZpbHRlcmVkID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICAgdGhpcy5jb3VudHJpZXMoKVxuICAgICAgICAgICAgLm1hcCgoaXNvKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlzbyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVzKCk/Lltpc29dIHx8ICcnLFxuICAgICAgICAgICAgICAgIGNvZGU6IHR1aUdldENhbGxpbmdDb2RlKGlzbywgdGhpcy5tZXRhZGF0YSgpKSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmZpbHRlcigoe25hbWUsIGNvZGV9KSA9PiBUVUlfREVGQVVMVF9NQVRDSEVSKG5hbWUgKyBjb2RlLCB0aGlzLnNlYXJjaCgpKSksXG4gICAgKTtcblxuICAgIHByb3RlY3RlZCByZWFkb25seSBlbmFibGVkID0gdHVpRGlyZWN0aXZlQmluZGluZyhcbiAgICAgICAgVHVpRHJvcGRvd25PcGVuLFxuICAgICAgICAndHVpRHJvcGRvd25FbmFibGVkJyxcbiAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZSxcbiAgICAgICAge30sXG4gICAgKTtcblxuICAgIHByb3RlY3RlZCByZWFkb25seSAkID0gaW5qZWN0KFR1aUFjdGl2ZVpvbmUpXG4gICAgICAgIC50dWlBY3RpdmVab25lQ2hhbmdlLnBpcGUoXG4gICAgICAgICAgICBmaWx0ZXIoKCkgPT4gIXRoaXMucmVhZE9ubHkoKSksXG4gICAgICAgICAgICB0YWtlVW50aWxEZXN0cm95ZWQoKSxcbiAgICAgICAgKVxuICAgICAgICAuc3Vic2NyaWJlKChhY3RpdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IGAke3R1aUdldENhbGxpbmdDb2RlKHRoaXMuY29kZSgpLCB0aGlzLm1ldGFkYXRhKCkpfSBgO1xuXG4gICAgICAgICAgICB0aGlzLnNlYXJjaC5zZXQoJycpO1xuICAgICAgICAgICAgdGhpcy5tYXNrZWQudXBkYXRlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrID0gYWN0aXZlID8gdmFsdWUgfHwgcHJlZml4IDogdmFsdWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHByZWZpeCA/ICcnIDogZmFsbGJhY2s7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICBASW5wdXQoKVxuICAgIHB1YmxpYyBjb3VudHJ5U2VhcmNoID0gZmFsc2U7XG5cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgcmVhZG9ubHkgY291bnRyeUlzb0NvZGVDaGFuZ2UgPSB0b09ic2VydmFibGUodGhpcy5jb2RlKS5waXBlKHNraXAoMSkpO1xuXG4gICAgQElucHV0KCdjb3VudHJpZXMnKVxuICAgIHB1YmxpYyBzZXQgY291bnRyaWVzVmFsdWUodmFsdWU6IHJlYWRvbmx5IFR1aUNvdW50cnlJc29Db2RlW10pIHtcbiAgICAgICAgdGhpcy5jb3VudHJpZXMuc2V0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBASW5wdXQoJ2NvdW50cnlJc29Db2RlJylcbiAgICBwdWJsaWMgc2V0IGlzb0NvZGUoY29kZTogVHVpQ291bnRyeUlzb0NvZGUpIHtcbiAgICAgICAgdGhpcy5jb2RlLnNldChjb2RlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGUgd3JpdGVWYWx1ZSh1bm1hc2tlZDogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgICAgICBjb25zdCBjb2RlID0gdGhpcy5nZXRDb3VudHJ5Q29kZSh1bm1hc2tlZCA/PyAnJyk7XG5cbiAgICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29kZS5zZXQoY29kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci53cml0ZVZhbHVlKHVubWFza2VkKTtcbiAgICAgICAgdGhpcy5tYXNrZWQuc2V0KFxuICAgICAgICAgICAgbWFza2l0b1RyYW5zZm9ybSh0aGlzLnZhbHVlKCkgPz8gJycsIHRoaXMubWFzaygpIHx8IE1BU0tJVE9fREVGQVVMVF9PUFRJT05TKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgb25QYXN0ZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHR1aUlzSW5wdXRFdmVudChldmVudCkgJiYgZXZlbnQuZGF0YTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhZGF0YSB8fFxuICAgICAgICAgICAgKCFldmVudC5pbnB1dFR5cGUuaW5jbHVkZXMoJ0Ryb3AnKSAmJiAhZXZlbnQuaW5wdXRUeXBlLmluY2x1ZGVzKCdQYXN0ZScpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvZGUgPSB0aGlzLmdldENvdW50cnlDb2RlKGRhdGEpO1xuXG4gICAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmNvZGUuc2V0KGNvZGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uSXRlbUNsaWNrKGNvZGU6IFR1aUNvdW50cnlJc29Db2RlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5vcGVuLnNldChmYWxzZSk7XG4gICAgICAgIHRoaXMuY29kZS5zZXQoY29kZSk7XG4gICAgICAgIHRoaXMuc2VhcmNoLnNldCgnJyk7XG4gICAgICAgIHRoaXMubWFza2VkLnNldChcbiAgICAgICAgICAgIG1hc2tpdG9UcmFuc2Zvcm0oXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSgpIHx8IHR1aUdldENhbGxpbmdDb2RlKGNvZGUsIHRoaXMubWV0YWRhdGEoKSksXG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrKCkgfHwgTUFTS0lUT19ERUZBVUxUX09QVElPTlMsXG4gICAgICAgICAgICApLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY29tcHV0ZU1hc2soXG4gICAgICAgIGNvdW50cnlJc29Db2RlOiBUdWlDb3VudHJ5SXNvQ29kZSxcbiAgICAgICAgbWV0YWRhdGE/OiBNZXRhZGF0YUpzb24sXG4gICAgKTogTWFza2l0b09wdGlvbnMgfCBudWxsIHtcbiAgICAgICAgaWYgKCFtZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7cGx1Z2lucywgLi4ub3B0aW9uc30gPSBtYXNraXRvUGhvbmVPcHRpb25zR2VuZXJhdG9yKHtcbiAgICAgICAgICAgIGNvdW50cnlJc29Db2RlLFxuICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICBzZXBhcmF0b3I6IHRoaXMub3B0aW9ucy5zZXBhcmF0b3IsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgcGx1Z2luczogWy4uLnBsdWdpbnMsIG1hc2tpdG9Jbml0aWFsQ2FsaWJyYXRpb25QbHVnaW4oKV0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1bm1hc2sobWFza2VkVmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gbWFza2VkVmFsdWUucmVwbGFjZUFsbChOT1RfRk9STV9DT05UUk9MX1NZTUJPTFMsICcnKTtcblxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHR1aUdldENhbGxpbmdDb2RlKHRoaXMuY29kZSgpLCB0aGlzLm1ldGFkYXRhKCkpID8gJycgOiB2YWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvdW50cnlDb2RlKHZhbHVlOiBzdHJpbmcpOiBUdWlDb3VudHJ5SXNvQ29kZSB8IG51bGwge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGEoKTtcbiAgICAgICAgY29uc3QgcGhvbmUgPSB2YWx1ZS5zdGFydHNXaXRoKENIQVJfUExVUykgPyB2YWx1ZSA6IENIQVJfUExVUyArIHZhbHVlO1xuXG4gICAgICAgIHJldHVybiBtZXRhZGF0YSAmJiB2YWxpZGF0ZVBob25lTnVtYmVyTGVuZ3RoKHBob25lKSAhPT0gJ1RPT19TSE9SVCdcbiAgICAgICAgICAgID8gKG1hc2tpdG9HZXRDb3VudHJ5RnJvbU51bWJlcihwaG9uZSwgbWV0YWRhdGEpID8/IG51bGwpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgfVxufVxuIiwiPG5nLWNvbnRhaW5lciAqdHVpVGV4dGZpZWxkQ29udGVudD5cbiAgICA8YnV0dG9uXG4gICAgICAgIGFwcGVhcmFuY2U9XCJ0ZXh0ZmllbGRcIlxuICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgdHVpQnV0dG9uXG4gICAgICAgIHR1aUNoZXZyb25cbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIGNsYXNzPVwidC1pcGktc2VsZWN0XCJcbiAgICAgICAgW2F0dHIuZGF0YS1tb2RlXT1cIm1vZGUoKVwiXG4gICAgICAgIFtjbGFzcy50LWlwaS1zZWxlY3RfcmVhZG9ubHldPVwicmVhZE9ubHkoKVwiXG4gICAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZCgpXCJcbiAgICAgICAgW3NpemVdPVwic2l6ZSgpXCJcbiAgICAgICAgW3R1aUFwcGVhcmFuY2VGb2N1c109XCJvcGVuKClcIlxuICAgICAgICAocG9pbnRlcmRvd24ucHJldmVudCk9XCJpbnRlcmFjdGl2ZSgpICYmIG9wZW4uc2V0KCFvcGVuKCkpXCJcbiAgICA+XG4gICAgICAgIDxpbWdcbiAgICAgICAgICAgIGNsYXNzPVwidC1pcGktZmxhZ1wiXG4gICAgICAgICAgICBbYWx0XT1cIm5hbWVzKCk/Lltjb2RlKCldXCJcbiAgICAgICAgICAgIFtjbGFzcy50LWlwaS1mbGFnX3NtYWxsXT1cInNpemUoKSA9PT0gJ3MnXCJcbiAgICAgICAgICAgIFtzcmNdPVwiY29kZSgpIHwgdHVpRmxhZ1wiXG4gICAgICAgIC8+XG4gICAgPC9idXR0b24+XG48L25nLWNvbnRhaW5lcj5cbjxuZy1jb250YWluZXIgKnR1aVRleHRmaWVsZERyb3Bkb3duPlxuICAgIDxkaXZcbiAgICAgICAgKm5nSWY9XCJjb3VudHJ5U2VhcmNoXCJcbiAgICAgICAgI2VsZW1lbnRcbiAgICAgICAgY2xhc3M9XCJ0LWlwaS1zZWFyY2hcIlxuICAgID5cbiAgICAgICAgPHR1aS10ZXh0ZmllbGRcbiAgICAgICAgICAgIFtpY29uU3RhcnRdPVwiaWNvbnMuc2VhcmNoXCJcbiAgICAgICAgICAgIFt0dWlUZXh0ZmllbGRTaXplXT1cInNpemUoKSA9PT0gJ3MnID8gJ3MnIDogJ20nXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlPVwib2ZmXCJcbiAgICAgICAgICAgICAgICB0dWlUZXh0ZmllbGRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgW2ZvY3VzZWRdPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgW25nTW9kZWxdPVwic2VhcmNoKClcIlxuICAgICAgICAgICAgICAgIFtuZ01vZGVsT3B0aW9uc109XCJ7c3RhbmRhbG9uZTogdHJ1ZX1cIlxuICAgICAgICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCJsYWJlbCgpXCJcbiAgICAgICAgICAgICAgICBbdHVpQXV0b0ZvY3VzXT1cIiEhZWxlbWVudC5jbG9zZXN0KCd0dWktZHJvcGRvd24tbW9iaWxlJylcIlxuICAgICAgICAgICAgICAgIChrZXlkb3duLmFycm93RG93bik9XCJsaXN0LmdldCgwKT8ubmF0aXZlRWxlbWVudD8uZm9jdXMoKVwiXG4gICAgICAgICAgICAgICAgKG5nTW9kZWxDaGFuZ2UpPVwic2VhcmNoLnNldCgkZXZlbnQpXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvdHVpLXRleHRmaWVsZD5cbiAgICA8L2Rpdj5cblxuICAgIDx0dWktZGF0YS1saXN0IGNsYXNzPVwidC1pcGktb3B0aW9uc1wiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAqbmdGb3I9XCJsZXQgaXRlbSBvZiBmaWx0ZXJlZCgpXCJcbiAgICAgICAgICAgIG5ld1xuICAgICAgICAgICAgdHVpT3B0aW9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIFt0dWlDZWxsXT1cInNpemUoKVwiXG4gICAgICAgICAgICAoY2xpY2spPVwib25JdGVtQ2xpY2soaXRlbS5pc28pXCJcbiAgICAgICAgPlxuICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIGFsdD1cIlwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJ0LWlwaS1mbGFnXCJcbiAgICAgICAgICAgICAgICBbY2xhc3MudC1pcGktZmxhZ19zbWFsbF09XCJzaXplKCkgPT09ICdzJ1wiXG4gICAgICAgICAgICAgICAgW3NyY109XCJpdGVtLmlzbyB8IHR1aUZsYWdcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxzcGFuIHR1aVRpdGxlPnt7IGl0ZW0ubmFtZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidC1pcGktY29kZVwiPnt7IGl0ZW0uY29kZSB9fTwvc3Bhbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgPC90dWktZGF0YS1saXN0PlxuPC9uZy1jb250YWluZXI+XG4iXX0=