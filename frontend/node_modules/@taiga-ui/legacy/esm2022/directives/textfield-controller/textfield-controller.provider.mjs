import { ChangeDetectorRef, InjectionToken } from '@angular/core';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { tuiWatch } from '@taiga-ui/cdk/observables';
import { TUI_TEXTFIELD_APPEARANCE } from '@taiga-ui/legacy/tokens';
import { merge, NEVER } from 'rxjs';
import { TuiTextfieldController } from './textfield.controller';
import { TUI_TEXTFIELD_OPTIONS } from './textfield.options';
import { TUI_TEXTFIELD_APPEARANCE_DIRECTIVE, } from './textfield-appearance.directive';
import { TUI_TEXTFIELD_CLEANER, } from './textfield-cleaner.directive';
import { TUI_TEXTFIELD_CUSTOM_CONTENT, } from './textfield-custom-content.directive';
import { TUI_TEXTFIELD_FILLER, } from './textfield-filler.directive';
import { TUI_TEXTFIELD_ICON, } from './textfield-icon.directive';
import { TUI_TEXTFIELD_ICON_LEFT, } from './textfield-icon-left.directive';
import { TUI_TEXTFIELD_LABEL_OUTSIDE, } from './textfield-label-outside.directive';
import { TUI_TEXTFIELD_POSTFIX, } from './textfield-postfix.directive';
import { TUI_TEXTFIELD_PREFIX, } from './textfield-prefix.directive';
import { TUI_TEXTFIELD_SIZE, } from './textfield-size.directive';
export const TUI_TEXTFIELD_WATCHED_CONTROLLER = new InjectionToken(ngDevMode ? 'TUI_TEXTFIELD_WATCHED_CONTROLLER' : '');
export const TEXTFIELD_CONTROLLER_PROVIDER = [
    {
        provide: TUI_TEXTFIELD_WATCHED_CONTROLLER,
        deps: [
            ChangeDetectorRef,
            TUI_TEXTFIELD_OPTIONS,
            TUI_TEXTFIELD_APPEARANCE,
            TUI_TEXTFIELD_APPEARANCE_DIRECTIVE,
            TUI_TEXTFIELD_CLEANER,
            TUI_TEXTFIELD_CUSTOM_CONTENT,
            TUI_TEXTFIELD_ICON,
            TUI_TEXTFIELD_ICON_LEFT,
            TUI_TEXTFIELD_LABEL_OUTSIDE,
            TUI_TEXTFIELD_SIZE,
            TUI_TEXTFIELD_PREFIX,
            TUI_TEXTFIELD_POSTFIX,
            TUI_TEXTFIELD_FILLER,
        ],
        useFactory: (cdr, options, legacyAppearance, ...controllers) => {
            const change$ = merge(...controllers.map(({ change$ }) => change$ || NEVER)).pipe(tuiWatch(cdr), takeUntilDestroyed());
            change$.subscribe();
            return new TuiTextfieldController(change$, options, legacyAppearance, ...controllers);
        },
    },
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dGZpZWxkLWNvbnRyb2xsZXIucHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9sZWdhY3kvZGlyZWN0aXZlcy90ZXh0ZmllbGQtY29udHJvbGxlci90ZXh0ZmllbGQtY29udHJvbGxlci5wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsaUJBQWlCLEVBQUUsY0FBYyxFQUFnQixNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUM5RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sMkJBQTJCLENBQUM7QUFDbkQsT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDakUsT0FBTyxFQUFDLEtBQUssRUFBRSxLQUFLLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFFbEMsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDOUQsT0FBTyxFQUFDLHFCQUFxQixFQUEyQixNQUFNLHFCQUFxQixDQUFDO0FBQ3BGLE9BQU8sRUFDSCxrQ0FBa0MsR0FFckMsTUFBTSxrQ0FBa0MsQ0FBQztBQUMxQyxPQUFPLEVBQ0gscUJBQXFCLEdBRXhCLE1BQU0sK0JBQStCLENBQUM7QUFDdkMsT0FBTyxFQUNILDRCQUE0QixHQUUvQixNQUFNLHNDQUFzQyxDQUFDO0FBQzlDLE9BQU8sRUFDSCxvQkFBb0IsR0FFdkIsTUFBTSw4QkFBOEIsQ0FBQztBQUN0QyxPQUFPLEVBQ0gsa0JBQWtCLEdBRXJCLE1BQU0sNEJBQTRCLENBQUM7QUFDcEMsT0FBTyxFQUNILHVCQUF1QixHQUUxQixNQUFNLGlDQUFpQyxDQUFDO0FBQ3pDLE9BQU8sRUFDSCwyQkFBMkIsR0FFOUIsTUFBTSxxQ0FBcUMsQ0FBQztBQUM3QyxPQUFPLEVBQ0gscUJBQXFCLEdBRXhCLE1BQU0sK0JBQStCLENBQUM7QUFDdkMsT0FBTyxFQUNILG9CQUFvQixHQUV2QixNQUFNLDhCQUE4QixDQUFDO0FBQ3RDLE9BQU8sRUFDSCxrQkFBa0IsR0FFckIsTUFBTSw0QkFBNEIsQ0FBQztBQUVwQyxNQUFNLENBQUMsTUFBTSxnQ0FBZ0MsR0FDekMsSUFBSSxjQUFjLENBQ2QsU0FBUyxDQUFDLENBQUMsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUN0RCxDQUFDO0FBRU4sTUFBTSxDQUFDLE1BQU0sNkJBQTZCLEdBQWE7SUFDbkQ7UUFDSSxPQUFPLEVBQUUsZ0NBQWdDO1FBQ3pDLElBQUksRUFBRTtZQUNGLGlCQUFpQjtZQUNqQixxQkFBcUI7WUFDckIsd0JBQXdCO1lBQ3hCLGtDQUFrQztZQUNsQyxxQkFBcUI7WUFDckIsNEJBQTRCO1lBQzVCLGtCQUFrQjtZQUNsQix1QkFBdUI7WUFDdkIsMkJBQTJCO1lBQzNCLGtCQUFrQjtZQUNsQixvQkFBb0I7WUFDcEIscUJBQXFCO1lBQ3JCLG9CQUFvQjtTQUN2QjtRQUNELFVBQVUsRUFBRSxDQUNSLEdBQXNCLEVBQ3RCLE9BQTRCLEVBQzVCLGdCQUF3QixFQUN4QixHQUFHLFdBV0YsRUFDSCxFQUFFO1lBQ0EsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUNqQixHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFDLE9BQU8sRUFBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLENBQ3RELENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUM7WUFFNUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBRXBCLE9BQU8sSUFBSSxzQkFBc0IsQ0FDN0IsT0FBTyxFQUNQLE9BQU8sRUFDUCxnQkFBZ0IsRUFDaEIsR0FBRyxXQUFXLENBQ2pCLENBQUM7UUFDTixDQUFDO0tBQ0o7Q0FDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VEZXRlY3RvclJlZiwgSW5qZWN0aW9uVG9rZW4sIHR5cGUgUHJvdmlkZXJ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHt0YWtlVW50aWxEZXN0cm95ZWR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvcnhqcy1pbnRlcm9wJztcbmltcG9ydCB7dHVpV2F0Y2h9IGZyb20gJ0B0YWlnYS11aS9jZGsvb2JzZXJ2YWJsZXMnO1xuaW1wb3J0IHtUVUlfVEVYVEZJRUxEX0FQUEVBUkFOQ0V9IGZyb20gJ0B0YWlnYS11aS9sZWdhY3kvdG9rZW5zJztcbmltcG9ydCB7bWVyZ2UsIE5FVkVSfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHtUdWlUZXh0ZmllbGRDb250cm9sbGVyfSBmcm9tICcuL3RleHRmaWVsZC5jb250cm9sbGVyJztcbmltcG9ydCB7VFVJX1RFWFRGSUVMRF9PUFRJT05TLCB0eXBlIFR1aVRleHRmaWVsZE9wdGlvbnN9IGZyb20gJy4vdGV4dGZpZWxkLm9wdGlvbnMnO1xuaW1wb3J0IHtcbiAgICBUVUlfVEVYVEZJRUxEX0FQUEVBUkFOQ0VfRElSRUNUSVZFLFxuICAgIHR5cGUgVHVpVGV4dGZpZWxkQXBwZWFyYW5jZURpcmVjdGl2ZSxcbn0gZnJvbSAnLi90ZXh0ZmllbGQtYXBwZWFyYW5jZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHtcbiAgICBUVUlfVEVYVEZJRUxEX0NMRUFORVIsXG4gICAgdHlwZSBUdWlUZXh0ZmllbGRDbGVhbmVyRGlyZWN0aXZlLFxufSBmcm9tICcuL3RleHRmaWVsZC1jbGVhbmVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQge1xuICAgIFRVSV9URVhURklFTERfQ1VTVE9NX0NPTlRFTlQsXG4gICAgdHlwZSBUdWlUZXh0ZmllbGRDdXN0b21Db250ZW50RGlyZWN0aXZlLFxufSBmcm9tICcuL3RleHRmaWVsZC1jdXN0b20tY29udGVudC5kaXJlY3RpdmUnO1xuaW1wb3J0IHtcbiAgICBUVUlfVEVYVEZJRUxEX0ZJTExFUixcbiAgICB0eXBlIFR1aVRleHRmaWVsZEZpbGxlckRpcmVjdGl2ZSxcbn0gZnJvbSAnLi90ZXh0ZmllbGQtZmlsbGVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQge1xuICAgIFRVSV9URVhURklFTERfSUNPTixcbiAgICB0eXBlIFR1aVRleHRmaWVsZEljb25EaXJlY3RpdmUsXG59IGZyb20gJy4vdGV4dGZpZWxkLWljb24uZGlyZWN0aXZlJztcbmltcG9ydCB7XG4gICAgVFVJX1RFWFRGSUVMRF9JQ09OX0xFRlQsXG4gICAgdHlwZSBUdWlUZXh0ZmllbGRJY29uTGVmdERpcmVjdGl2ZSxcbn0gZnJvbSAnLi90ZXh0ZmllbGQtaWNvbi1sZWZ0LmRpcmVjdGl2ZSc7XG5pbXBvcnQge1xuICAgIFRVSV9URVhURklFTERfTEFCRUxfT1VUU0lERSxcbiAgICB0eXBlIFR1aVRleHRmaWVsZExhYmVsT3V0c2lkZURpcmVjdGl2ZSxcbn0gZnJvbSAnLi90ZXh0ZmllbGQtbGFiZWwtb3V0c2lkZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHtcbiAgICBUVUlfVEVYVEZJRUxEX1BPU1RGSVgsXG4gICAgdHlwZSBUdWlUZXh0ZmllbGRQb3N0Zml4RGlyZWN0aXZlLFxufSBmcm9tICcuL3RleHRmaWVsZC1wb3N0Zml4LmRpcmVjdGl2ZSc7XG5pbXBvcnQge1xuICAgIFRVSV9URVhURklFTERfUFJFRklYLFxuICAgIHR5cGUgVHVpVGV4dGZpZWxkUHJlZml4RGlyZWN0aXZlLFxufSBmcm9tICcuL3RleHRmaWVsZC1wcmVmaXguZGlyZWN0aXZlJztcbmltcG9ydCB7XG4gICAgVFVJX1RFWFRGSUVMRF9TSVpFLFxuICAgIHR5cGUgVHVpVGV4dGZpZWxkU2l6ZURpcmVjdGl2ZSxcbn0gZnJvbSAnLi90ZXh0ZmllbGQtc2l6ZS5kaXJlY3RpdmUnO1xuXG5leHBvcnQgY29uc3QgVFVJX1RFWFRGSUVMRF9XQVRDSEVEX0NPTlRST0xMRVIgPVxuICAgIG5ldyBJbmplY3Rpb25Ub2tlbjxUdWlUZXh0ZmllbGRDb250cm9sbGVyPihcbiAgICAgICAgbmdEZXZNb2RlID8gJ1RVSV9URVhURklFTERfV0FUQ0hFRF9DT05UUk9MTEVSJyA6ICcnLFxuICAgICk7XG5cbmV4cG9ydCBjb25zdCBURVhURklFTERfQ09OVFJPTExFUl9QUk9WSURFUjogUHJvdmlkZXIgPSBbXG4gICAge1xuICAgICAgICBwcm92aWRlOiBUVUlfVEVYVEZJRUxEX1dBVENIRURfQ09OVFJPTExFUixcbiAgICAgICAgZGVwczogW1xuICAgICAgICAgICAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgICAgICBUVUlfVEVYVEZJRUxEX09QVElPTlMsXG4gICAgICAgICAgICBUVUlfVEVYVEZJRUxEX0FQUEVBUkFOQ0UsXG4gICAgICAgICAgICBUVUlfVEVYVEZJRUxEX0FQUEVBUkFOQ0VfRElSRUNUSVZFLFxuICAgICAgICAgICAgVFVJX1RFWFRGSUVMRF9DTEVBTkVSLFxuICAgICAgICAgICAgVFVJX1RFWFRGSUVMRF9DVVNUT01fQ09OVEVOVCxcbiAgICAgICAgICAgIFRVSV9URVhURklFTERfSUNPTixcbiAgICAgICAgICAgIFRVSV9URVhURklFTERfSUNPTl9MRUZULFxuICAgICAgICAgICAgVFVJX1RFWFRGSUVMRF9MQUJFTF9PVVRTSURFLFxuICAgICAgICAgICAgVFVJX1RFWFRGSUVMRF9TSVpFLFxuICAgICAgICAgICAgVFVJX1RFWFRGSUVMRF9QUkVGSVgsXG4gICAgICAgICAgICBUVUlfVEVYVEZJRUxEX1BPU1RGSVgsXG4gICAgICAgICAgICBUVUlfVEVYVEZJRUxEX0ZJTExFUixcbiAgICAgICAgXSxcbiAgICAgICAgdXNlRmFjdG9yeTogKFxuICAgICAgICAgICAgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICAgICAgICAgIG9wdGlvbnM6IFR1aVRleHRmaWVsZE9wdGlvbnMsXG4gICAgICAgICAgICBsZWdhY3lBcHBlYXJhbmNlOiBzdHJpbmcsXG4gICAgICAgICAgICAuLi5jb250cm9sbGVyczogW1xuICAgICAgICAgICAgICAgIFR1aVRleHRmaWVsZEFwcGVhcmFuY2VEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgVHVpVGV4dGZpZWxkQ2xlYW5lckRpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBUdWlUZXh0ZmllbGRDdXN0b21Db250ZW50RGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIFR1aVRleHRmaWVsZEljb25EaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgVHVpVGV4dGZpZWxkSWNvbkxlZnREaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgVHVpVGV4dGZpZWxkTGFiZWxPdXRzaWRlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIFR1aVRleHRmaWVsZFNpemVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgVHVpVGV4dGZpZWxkUHJlZml4RGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIFR1aVRleHRmaWVsZFBvc3RmaXhEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgVHVpVGV4dGZpZWxkRmlsbGVyRGlyZWN0aXZlLFxuICAgICAgICAgICAgXVxuICAgICAgICApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZSQgPSBtZXJnZShcbiAgICAgICAgICAgICAgICAuLi5jb250cm9sbGVycy5tYXAoKHtjaGFuZ2UkfSkgPT4gY2hhbmdlJCB8fCBORVZFUiksXG4gICAgICAgICAgICApLnBpcGUodHVpV2F0Y2goY2RyKSwgdGFrZVVudGlsRGVzdHJveWVkKCkpO1xuXG4gICAgICAgICAgICBjaGFuZ2UkLnN1YnNjcmliZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR1aVRleHRmaWVsZENvbnRyb2xsZXIoXG4gICAgICAgICAgICAgICAgY2hhbmdlJCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgICAgIGxlZ2FjeUFwcGVhcmFuY2UsXG4gICAgICAgICAgICAgICAgLi4uY29udHJvbGxlcnMsXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgIH0sXG5dO1xuIl19