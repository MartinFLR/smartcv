import { Directive, inject } from '@angular/core';
import { NG_VALIDATORS, Validators } from '@angular/forms';
import { TuiValidator } from '@taiga-ui/cdk/directives/validator';
import { tuiProvide } from '@taiga-ui/cdk/utils/miscellaneous';
import { tuiCreateFileFormatValidator, tuiCreateFileSizeValidator, } from '../files.validators';
import { TUI_INPUT_FILES_OPTIONS } from './input-files.options';
import * as i0 from "@angular/core";
class TuiInputFilesValidator extends TuiValidator {
    constructor() {
        super(...arguments);
        this.options = inject(TUI_INPUT_FILES_OPTIONS);
        this.accept = this.options.accept;
        this.maxFileSize = this.options.maxFileSize;
    }
    ngOnChanges() {
        this.update();
    }
    ngOnInit() {
        this.update();
    }
    update() {
        this.validate =
            Validators.compose([
                tuiCreateFileFormatValidator(this.accept),
                tuiCreateFileSizeValidator(this.maxFileSize),
            ]) || Validators.nullValidator;
        this.onChange();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiInputFilesValidator, deps: null, target: i0.ɵɵFactoryTarget.Directive }); }
    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "14.0.0", version: "16.2.12", type: TuiInputFilesValidator, isStandalone: true, inputs: { accept: "accept", maxFileSize: "maxFileSize" }, host: { properties: { "accept": "accept" } }, providers: [tuiProvide(NG_VALIDATORS, TuiInputFilesValidator, true)], exportAs: ["tuiInputFilesValidator"], usesInheritance: true, usesOnChanges: true, ngImport: i0 }); }
}
export { TuiInputFilesValidator };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TuiInputFilesValidator, decorators: [{
            type: Directive,
            args: [{
                    standalone: true,
                    inputs: ['accept', 'maxFileSize'],
                    providers: [tuiProvide(NG_VALIDATORS, TuiInputFilesValidator, true)],
                    exportAs: 'tuiInputFilesValidator',
                    host: {
                        '[accept]': 'accept',
                    },
                }]
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQtZmlsZXMtdmFsaWRhdG9yLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2tpdC9jb21wb25lbnRzL2ZpbGVzL2lucHV0LWZpbGVzL2lucHV0LWZpbGVzLXZhbGlkYXRvci5kaXJlY3RpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxNQUFNLEVBQThCLE1BQU0sZUFBZSxDQUFDO0FBQzdFLE9BQU8sRUFBQyxhQUFhLEVBQUUsVUFBVSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDekQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ2hFLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxtQ0FBbUMsQ0FBQztBQUU3RCxPQUFPLEVBQ0gsNEJBQTRCLEVBQzVCLDBCQUEwQixHQUM3QixNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDOztBQUU5RCxNQVNhLHNCQUF1QixTQUFRLFlBQVk7SUFUeEQ7O1FBVXFCLFlBQU8sR0FBRyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUVwRCxXQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDN0IsZ0JBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztLQWtCakQ7SUFoQm1CLFdBQVc7UUFDdkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxRQUFRO1FBQ1gsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFFTyxNQUFNO1FBQ1YsSUFBSSxDQUFDLFFBQVE7WUFDVCxVQUFVLENBQUMsT0FBTyxDQUFDO2dCQUNmLDRCQUE0QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7Z0JBQ3pDLDBCQUEwQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7YUFDL0MsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxhQUFhLENBQUM7UUFDbkMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3BCLENBQUM7K0dBckJRLHNCQUFzQjttR0FBdEIsc0JBQXNCLHlJQU5wQixDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLENBQUM7O1NBTTNELHNCQUFzQjs0RkFBdEIsc0JBQXNCO2tCQVRsQyxTQUFTO21CQUFDO29CQUNQLFVBQVUsRUFBRSxJQUFJO29CQUNoQixNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsYUFBYSxDQUFDO29CQUNqQyxTQUFTLEVBQUUsQ0FBQyxVQUFVLENBQUMsYUFBYSwwQkFBMEIsSUFBSSxDQUFDLENBQUM7b0JBQ3BFLFFBQVEsRUFBRSx3QkFBd0I7b0JBQ2xDLElBQUksRUFBRTt3QkFDRixVQUFVLEVBQUUsUUFBUTtxQkFDdkI7aUJBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0RpcmVjdGl2ZSwgaW5qZWN0LCB0eXBlIE9uQ2hhbmdlcywgdHlwZSBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOR19WQUxJREFUT1JTLCBWYWxpZGF0b3JzfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge1R1aVZhbGlkYXRvcn0gZnJvbSAnQHRhaWdhLXVpL2Nkay9kaXJlY3RpdmVzL3ZhbGlkYXRvcic7XG5pbXBvcnQge3R1aVByb3ZpZGV9IGZyb20gJ0B0YWlnYS11aS9jZGsvdXRpbHMvbWlzY2VsbGFuZW91cyc7XG5cbmltcG9ydCB7XG4gICAgdHVpQ3JlYXRlRmlsZUZvcm1hdFZhbGlkYXRvcixcbiAgICB0dWlDcmVhdGVGaWxlU2l6ZVZhbGlkYXRvcixcbn0gZnJvbSAnLi4vZmlsZXMudmFsaWRhdG9ycyc7XG5pbXBvcnQge1RVSV9JTlBVVF9GSUxFU19PUFRJT05TfSBmcm9tICcuL2lucHV0LWZpbGVzLm9wdGlvbnMnO1xuXG5ARGlyZWN0aXZlKHtcbiAgICBzdGFuZGFsb25lOiB0cnVlLFxuICAgIGlucHV0czogWydhY2NlcHQnLCAnbWF4RmlsZVNpemUnXSxcbiAgICBwcm92aWRlcnM6IFt0dWlQcm92aWRlKE5HX1ZBTElEQVRPUlMsIFR1aUlucHV0RmlsZXNWYWxpZGF0b3IsIHRydWUpXSxcbiAgICBleHBvcnRBczogJ3R1aUlucHV0RmlsZXNWYWxpZGF0b3InLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1thY2NlcHRdJzogJ2FjY2VwdCcsXG4gICAgfSxcbn0pXG5leHBvcnQgY2xhc3MgVHVpSW5wdXRGaWxlc1ZhbGlkYXRvciBleHRlbmRzIFR1aVZhbGlkYXRvciBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbnMgPSBpbmplY3QoVFVJX0lOUFVUX0ZJTEVTX09QVElPTlMpO1xuXG4gICAgcHVibGljIGFjY2VwdCA9IHRoaXMub3B0aW9ucy5hY2NlcHQ7XG4gICAgcHVibGljIG1heEZpbGVTaXplID0gdGhpcy5vcHRpb25zLm1heEZpbGVTaXplO1xuXG4gICAgcHVibGljIG92ZXJyaWRlIG5nT25DaGFuZ2VzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9XG4gICAgICAgICAgICBWYWxpZGF0b3JzLmNvbXBvc2UoW1xuICAgICAgICAgICAgICAgIHR1aUNyZWF0ZUZpbGVGb3JtYXRWYWxpZGF0b3IodGhpcy5hY2NlcHQpLFxuICAgICAgICAgICAgICAgIHR1aUNyZWF0ZUZpbGVTaXplVmFsaWRhdG9yKHRoaXMubWF4RmlsZVNpemUpLFxuICAgICAgICAgICAgXSkgfHwgVmFsaWRhdG9ycy5udWxsVmFsaWRhdG9yO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKCk7XG4gICAgfVxufVxuIl19