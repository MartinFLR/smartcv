{"version":3,"file":"taiga-ui-kit-components-input-date-range.mjs","sources":["../../../projects/kit/components/input-date-range/input-date-range.options.ts","../../../projects/kit/components/input-date-range/input-date-range.directive.ts","../../../projects/kit/components/input-date-range/input-date-range.ts","../../../projects/kit/components/input-date-range/taiga-ui-kit-components-input-date-range.ts"],"sourcesContent":["import {type FactoryProvider, inject, InjectionToken} from '@angular/core';\nimport {\n    TUI_IDENTITY_VALUE_TRANSFORMER,\n    type TuiValueTransformer,\n} from '@taiga-ui/cdk/classes';\nimport {type TuiDayRange} from '@taiga-ui/cdk/date-time';\nimport {tuiProvideOptions} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {\n    TUI_INPUT_DATE_DEFAULT_OPTIONS_NEW,\n    TUI_INPUT_DATE_OPTIONS_NEW,\n    type TuiInputDateOptionsNew,\n} from '@taiga-ui/kit/components/input-date';\n\nexport interface TuiInputDateRangeOptions\n    extends Omit<TuiInputDateOptionsNew, 'valueTransformer'> {\n    readonly valueTransformer: TuiValueTransformer<TuiDayRange | null, any>;\n}\n\nexport const TUI_INPUT_DATE_RANGE_OPTIONS = new InjectionToken<TuiInputDateRangeOptions>(\n    ngDevMode ? 'TUI_INPUT_DATE_RANGE_OPTIONS' : '',\n    {\n        factory: () => ({\n            ...inject(TUI_INPUT_DATE_OPTIONS_NEW),\n            valueTransformer: TUI_IDENTITY_VALUE_TRANSFORMER,\n        }),\n    },\n);\n\nexport const tuiInputDateRangeOptionsProvider = (\n    options: Partial<TuiInputDateRangeOptions>,\n): FactoryProvider =>\n    tuiProvideOptions(\n        TUI_INPUT_DATE_RANGE_OPTIONS,\n        options,\n        TUI_INPUT_DATE_DEFAULT_OPTIONS_NEW,\n    );\n","import {computed, Directive, inject, Input, signal} from '@angular/core';\nimport {MaskitoDirective} from '@maskito/angular';\nimport {maskitoDateRangeOptionsGenerator} from '@maskito/kit';\nimport {tuiAsControl, tuiValueTransformerFrom} from '@taiga-ui/cdk/classes';\nimport {\n    DATE_RANGE_FILLER_LENGTH,\n    RANGE_SEPARATOR_CHAR,\n    type TuiDayLike,\n    TuiDayRange,\n} from '@taiga-ui/cdk/date-time';\nimport {tuiProvide} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TuiWithTextfield} from '@taiga-ui/core/components/textfield';\nimport {TuiDropdownAuto} from '@taiga-ui/core/directives/dropdown';\nimport {\n    TUI_ITEMS_HANDLERS,\n    type TuiItemsHandlers,\n} from '@taiga-ui/core/directives/items-handlers';\nimport {type TuiCalendarRange} from '@taiga-ui/kit/components/calendar-range';\nimport {\n    TUI_DATE_ADAPTER,\n    TUI_INPUT_DATE_OPTIONS_NEW,\n    TuiInputDateBase,\n    tuiWithDateFiller,\n} from '@taiga-ui/kit/components/input-date';\nimport {tuiMaskito} from '@taiga-ui/kit/utils';\n\nimport {TUI_INPUT_DATE_RANGE_OPTIONS} from './input-date-range.options';\n\n@Directive({\n    standalone: true,\n    selector: 'input[tuiInputDateRange]',\n    providers: [\n        // TODO: Add SelectOption after data-list in calendar-range is refactored\n        tuiAsControl(TuiInputDateRangeDirective),\n        tuiValueTransformerFrom(TUI_INPUT_DATE_RANGE_OPTIONS),\n        tuiProvide(TUI_INPUT_DATE_OPTIONS_NEW, TUI_INPUT_DATE_RANGE_OPTIONS),\n    ],\n    hostDirectives: [TuiWithTextfield, TuiDropdownAuto, MaskitoDirective],\n})\nexport class TuiInputDateRangeDirective extends TuiInputDateBase<TuiDayRange> {\n    protected readonly identity = inject<TuiItemsHandlers<TuiDayRange>>(\n        TUI_ITEMS_HANDLERS,\n    ).identityMatcher.set((a, b) => a.daySame(b));\n\n    protected override readonly filler = tuiWithDateFiller(\n        (filler) => `${filler}${RANGE_SEPARATOR_CHAR}${filler}`,\n    );\n\n    protected readonly mask = tuiMaskito(\n        computed(() =>\n            maskitoDateRangeOptionsGenerator({\n                dateSeparator: this.format().separator,\n                mode: TUI_DATE_ADAPTER[this.format().mode],\n                min: this.min().toLocalNativeDate(),\n                max: this.max().toLocalNativeDate(),\n                minLength: this.minLength() || {},\n                maxLength: this.maxLength() || {},\n            }),\n        ),\n    );\n\n    public readonly minLength = signal<TuiDayLike | null>(null);\n    public readonly maxLength = signal<TuiDayLike | null>(null);\n\n    @Input('minLength')\n    public set minLengthSetter(minLength: TuiDayLike | null) {\n        this.minLength.set(minLength);\n    }\n\n    @Input('maxLength')\n    public set maxLengthSetter(maxLength: TuiDayLike | null) {\n        this.maxLength.set(maxLength);\n    }\n\n    protected override processCalendar(calendar: TuiCalendarRange): void {\n        super.processCalendar(calendar);\n\n        calendar.minLength = this.minLength();\n        calendar.maxLength = this.maxLength();\n    }\n\n    protected override onValueChange(value: string): void {\n        this.control?.control?.updateValueAndValidity({emitEvent: false});\n        this.onChange(\n            value.length === DATE_RANGE_FILLER_LENGTH\n                ? TuiDayRange.normalizeParse(value, this.format().mode)\n                : null,\n        );\n    }\n}\n","import {TuiCalendarRange} from '@taiga-ui/kit/components/calendar-range';\n\nimport {TuiInputDateRangeDirective} from './input-date-range.directive';\n\nexport const TuiInputDateRange = [TuiInputDateRangeDirective, TuiCalendarRange] as const;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}