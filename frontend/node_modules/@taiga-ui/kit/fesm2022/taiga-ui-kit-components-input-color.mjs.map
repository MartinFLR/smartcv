{"version":3,"file":"taiga-ui-kit-components-input-color.mjs","sources":["../../../projects/kit/components/input-color/input-color.options.ts","../../../projects/kit/components/input-color/input-color.component.ts","../../../projects/kit/components/input-color/input-color.template.html","../../../projects/kit/components/input-color/taiga-ui-kit-components-input-color.ts"],"sourcesContent":["import {tuiCreateOptions} from '@taiga-ui/cdk/utils/di';\nimport {type TuiHorizontalDirection} from '@taiga-ui/core/types';\n\nexport interface TuiInputColorOptions {\n    readonly format: 'hex' | 'hexa';\n    readonly align: TuiHorizontalDirection;\n}\n\nexport const [TUI_INPUT_COLOR_OPTIONS, tuiInputColorOptionsProvider] =\n    tuiCreateOptions<TuiInputColorOptions>({\n        format: 'hex',\n        align: 'left',\n    });\n","import {NgIf} from '@angular/common';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    computed,\n    inject,\n    Input,\n    signal,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {MaskitoDirective} from '@maskito/angular';\nimport {\n    maskitoAddOnFocusPlugin,\n    maskitoPrefixPostprocessorGenerator,\n    maskitoRemoveOnBlurPlugin,\n} from '@maskito/kit';\nimport {tuiAsControl, TuiControl} from '@taiga-ui/cdk/classes';\nimport {tuiFallbackValueProvider} from '@taiga-ui/cdk/tokens';\nimport {tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiDirectiveBinding} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TuiTextfieldContent, TuiWithTextfield} from '@taiga-ui/core/components/textfield';\nimport {TuiIcons} from '@taiga-ui/core/directives/icons';\nimport {type TuiHorizontalDirection} from '@taiga-ui/core/types';\nimport {TuiSlider, tuiSliderOptionsProvider} from '@taiga-ui/kit/components/slider';\nimport {tuiMaskito} from '@taiga-ui/kit/utils';\n\nimport {TUI_INPUT_COLOR_OPTIONS, type TuiInputColorOptions} from './input-color.options';\n\nconst REGEX = /[0-9a-fA-F]/;\n\n@Component({\n    standalone: true,\n    selector: 'input[tuiInputColor]',\n    imports: [FormsModule, NgIf, TuiSlider, TuiTextfieldContent],\n    templateUrl: './input-color.template.html',\n    styleUrls: ['./input-color.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        tuiAsControl(TuiInputColor),\n        tuiFallbackValueProvider(''),\n        tuiSliderOptionsProvider({trackColor: 'transparent'}),\n    ],\n    hostDirectives: [MaskitoDirective, TuiWithTextfield],\n    host: {\n        ngSkipHydration: 'true',\n        inputmode: 'numeric',\n        spellcheck: 'false',\n        '[disabled]': 'disabled()',\n        '[value]': 'value()',\n        '[attr.list]': 'null',\n        '(input)': 'onChange($event.target.value)',\n    },\n})\nexport class TuiInputColor extends TuiControl<string> {\n    protected readonly options = inject(TUI_INPUT_COLOR_OPTIONS);\n    protected readonly el = tuiInjectElement<HTMLInputElement>();\n    protected readonly list = this.el.getAttribute('list');\n    protected readonly format = signal(this.options.format);\n    protected readonly align = signal<TuiHorizontalDirection>(this.options.align);\n\n    protected readonly icon = tuiDirectiveBinding(\n        TuiIcons,\n        'iconStart',\n        computed(() =>\n            this.align() === 'left'\n                ? '\"data:image/svg+xml;utf8,<svg xmlns=http://www.w3.org/2000/svg></svg>\"'\n                : '',\n        ),\n        {},\n    );\n\n    protected readonly maskito = tuiMaskito(\n        computed((length = this.format().length * 2) => ({\n            mask: ['#', ...Array.from<RegExp>({length}).fill(REGEX)],\n            postprocessors: [maskitoPrefixPostprocessorGenerator('#')],\n            plugins: [maskitoAddOnFocusPlugin('#'), maskitoRemoveOnBlurPlugin('#')],\n            overwriteMode: 'replace',\n        })),\n    );\n\n    protected readonly filled = computed(() =>\n        this.format() === 'hex' ? this.value().length === 7 : this.value().length === 9,\n    );\n\n    protected readonly opacity = computed(() =>\n        this.filled() && this.format() === 'hexa'\n            ? Number.parseInt(this.value().slice(-2), 16)\n            : 255,\n    );\n\n    @Input('align')\n    public set alignSetter(align: TuiInputColorOptions['align']) {\n        this.align.set(align);\n    }\n\n    @Input('format')\n    public set formatSetter(mode: TuiInputColorOptions['format']) {\n        this.format.set(mode);\n    }\n\n    protected onInput(value: string): void {\n        this.onChange(\n            this.format() === 'hex' ? value : `${value}${toHex(this.opacity())}`,\n        );\n    }\n\n    protected onOpacity(opacity: number): void {\n        const value = this.filled() ? this.value().slice(0, 7) : '#000000';\n\n        this.onChange(`${value}${toHex(opacity)}`);\n    }\n}\n\nfunction toHex(value: number): string {\n    return value.toString(16).padStart(2, '0');\n}\n","<ng-container *tuiTextfieldContent>\n    <input\n        #input\n        tabindex=\"-1\"\n        type=\"color\"\n        class=\"tui-input-color_picker\"\n        [attr.list]=\"list\"\n        [class.tui-input-color_left]=\"align() === 'left'\"\n        [disabled]=\"!interactive()\"\n        [style.--t-opacity]=\"filled() ? opacity() / 255 : 0\"\n        [value]=\"value().length > 6 ? value().slice(0, 7) : ''\"\n        (input)=\"onInput(input.value)\"\n    />\n    <input\n        *ngIf=\"format() === 'hexa' && interactive()\"\n        max=\"255\"\n        tuiSlider\n        type=\"range\"\n        [ngModel]=\"opacity()\"\n        [ngModelOptions]=\"{standalone: true}\"\n        (ngModelChange)=\"onOpacity($event)\"\n        (pointerdown.stop)=\"el.focus()\"\n    />\n</ng-container>\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}