{"version":3,"file":"taiga-ui-kit-components-input-date-time.mjs","sources":["../../../projects/kit/components/input-date-time/input-date-time.options.ts","../../../projects/kit/components/input-date-time/input-date-time.directive.ts","../../../projects/kit/components/input-date-time/input-date-time.component.ts","../../../projects/kit/components/input-date-time/input-date-time.template.html","../../../projects/kit/components/input-date-time/input-date-time.ts","../../../projects/kit/components/input-date-time/taiga-ui-kit-components-input-date-time.ts"],"sourcesContent":["import {type FactoryProvider, inject, InjectionToken} from '@angular/core';\nimport {type MaskitoTimeMode} from '@maskito/kit';\nimport {\n    TUI_IDENTITY_VALUE_TRANSFORMER,\n    type TuiValueTransformer,\n} from '@taiga-ui/cdk/classes';\nimport {type TuiDay, type TuiTime} from '@taiga-ui/cdk/date-time';\nimport {tuiProvideOptions} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {\n    TUI_INPUT_DATE_DEFAULT_OPTIONS_NEW,\n    TUI_INPUT_DATE_OPTIONS_NEW,\n    type TuiInputDateOptionsNew,\n} from '@taiga-ui/kit/components/input-date';\n\nexport interface TuiInputDateTimeOptions\n    extends Omit<TuiInputDateOptionsNew, 'valueTransformer'> {\n    readonly timeMode: MaskitoTimeMode;\n    readonly dateTimeSeparator: string;\n    readonly valueTransformer: TuiValueTransformer<[TuiDay, TuiTime | null] | null, any>;\n}\n\nexport const TUI_INPUT_DATE_TIME_DEFAULT_OPTIONS = {\n    valueTransformer: TUI_IDENTITY_VALUE_TRANSFORMER,\n    timeMode: 'HH:MM',\n    dateTimeSeparator: ', ',\n} as const;\n\nexport const TUI_INPUT_DATE_TIME_OPTIONS = new InjectionToken<TuiInputDateTimeOptions>(\n    ngDevMode ? 'TUI_INPUT_DATE_TIME_OPTIONS' : '',\n    {\n        factory: () => ({\n            ...inject(TUI_INPUT_DATE_OPTIONS_NEW),\n            ...TUI_INPUT_DATE_TIME_DEFAULT_OPTIONS,\n        }),\n    },\n);\n\nexport const tuiInputDateTimeOptionsProvider = (\n    options: Partial<TuiInputDateTimeOptions>,\n): FactoryProvider =>\n    tuiProvideOptions(TUI_INPUT_DATE_TIME_OPTIONS, options, {\n        ...TUI_INPUT_DATE_DEFAULT_OPTIONS_NEW,\n        ...TUI_INPUT_DATE_TIME_DEFAULT_OPTIONS,\n    });\n","import {\n    computed,\n    Directive,\n    effect,\n    inject,\n    Input,\n    signal,\n    untracked,\n} from '@angular/core';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport {MaskitoDirective} from '@maskito/angular';\nimport {type MaskitoOptions} from '@maskito/core';\nimport {\n    maskitoDateTimeOptionsGenerator,\n    type MaskitoDateTimeParams,\n    maskitoSelectionChangeHandler,\n    type MaskitoTimeMode,\n} from '@maskito/kit';\nimport {tuiAsControl, tuiValueTransformerFrom} from '@taiga-ui/cdk/classes';\nimport {\n    DATE_FILLER_LENGTH,\n    MILLISECONDS_IN_DAY,\n    TuiDay,\n    TuiTime,\n} from '@taiga-ui/cdk/date-time';\nimport {tuiClamp, tuiSum} from '@taiga-ui/cdk/utils/math';\nimport {tuiDirectiveBinding} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {type TuiCalendar} from '@taiga-ui/core/components/calendar';\nimport {tuiAsOptionContent} from '@taiga-ui/core/components/data-list';\nimport {\n    tuiAsTextfieldAccessor,\n    type TuiTextfieldAccessor,\n    TuiWithTextfield,\n} from '@taiga-ui/core/components/textfield';\nimport {TuiDropdownAuto} from '@taiga-ui/core/directives/dropdown';\nimport {TuiItemsHandlersValidator} from '@taiga-ui/core/directives/items-handlers';\nimport {\n    TUI_DATE_ADAPTER,\n    TuiInputDateBase,\n    tuiWithDateFiller,\n} from '@taiga-ui/kit/components/input-date';\nimport {TuiSelectOption} from '@taiga-ui/kit/components/select';\nimport {TUI_TIME_TEXTS} from '@taiga-ui/kit/tokens';\nimport {tuiMaskito} from '@taiga-ui/kit/utils';\nimport {noop} from 'rxjs';\n\nimport {TUI_INPUT_DATE_TIME_OPTIONS} from './input-date-time.options';\n\nconst MIN_TIME = new TuiTime(0, 0);\nconst MAX_TIME = TuiTime.fromAbsoluteMilliseconds(MILLISECONDS_IN_DAY - 1);\n\n@Directive({\n    standalone: true,\n    selector: 'input[tuiInputDateTime]',\n    providers: [\n        tuiAsOptionContent(TuiSelectOption),\n        tuiAsControl(TuiInputDateTimeDirective),\n        tuiAsTextfieldAccessor(TuiInputDateTimeDirective),\n        tuiValueTransformerFrom(TUI_INPUT_DATE_TIME_OPTIONS),\n    ],\n    hostDirectives: [\n        MaskitoDirective,\n        TuiDropdownAuto,\n        TuiItemsHandlersValidator,\n        TuiWithTextfield,\n    ],\n})\nexport class TuiInputDateTimeDirective\n    extends TuiInputDateBase<readonly [TuiDay, TuiTime | null]>\n    implements TuiTextfieldAccessor<readonly [TuiDay, TuiTime | null]>\n{\n    private readonly timeFillers = toSignal(inject(TUI_TIME_TEXTS));\n\n    protected override readonly options = inject(TUI_INPUT_DATE_TIME_OPTIONS);\n\n    protected override readonly filler = tuiWithDateFiller((date) => {\n        const time = this.timeFillers()?.[this.timeMode()] ?? '';\n\n        return `${date}${this.options.dateTimeSeparator}${time}`;\n    });\n\n    protected override valueEffect = effect(noop);\n\n    protected readonly identity = this.handlers.identityMatcher.set(\n        (a, b) => tuiSum(...a.map(Number)) === tuiSum(...b.map(Number)),\n    );\n\n    protected readonly disabledItemHandler = tuiDirectiveBinding(\n        TuiItemsHandlersValidator,\n        'disabledItemHandler',\n        (value: readonly [TuiDay, TuiTime | null] | null) =>\n            Boolean(value && this.handlers.disabledItemHandler()(value)),\n    );\n\n    protected readonly mask = tuiMaskito(\n        computed(() =>\n            this.computeMask({\n                dateMode: TUI_DATE_ADAPTER[this.format().mode],\n                timeMode: this.timeMode(),\n                min: this.toNativeDate([this.min(), this.minTime()]),\n                max: this.toNativeDate([this.max(), this.maxTime()]),\n                dateSeparator: this.format().separator,\n                dateTimeSeparator: this.options.dateTimeSeparator,\n            }),\n        ),\n    );\n\n    public readonly timeMode = signal(this.options.timeMode);\n    public readonly minTime = signal(MIN_TIME);\n    public readonly maxTime = signal(MAX_TIME);\n\n    // TODO(v5): use signal inputs\n    @Input('timeMode')\n    public set timeModeSetter(x: MaskitoTimeMode) {\n        this.timeMode.set(x);\n    }\n\n    @Input('min')\n    public override set minSetter(\n        min: TuiDay | readonly [TuiDay, TuiTime | null] | null,\n    ) {\n        const [date, time] = Array.isArray(min) ? min : [min, null];\n\n        this.min.set(date || this.options.min);\n        this.minTime.set(time ?? MIN_TIME);\n    }\n\n    @Input('max')\n    public override set maxSetter(\n        max: TuiDay | readonly [TuiDay, TuiTime | null] | null,\n    ) {\n        const [date, time] = Array.isArray(max) ? max : [max, null];\n\n        this.max.set(date || this.options.max);\n        this.maxTime.set(time ?? MAX_TIME);\n    }\n\n    public setValue(value: readonly [TuiDay, TuiTime | null] | null): void {\n        this.onChange(value);\n        this.textfield.value.set(this.stringify(value));\n    }\n\n    public override setDate(newDate: TuiDay): void {\n        const [date, time] = this.clampTime([newDate, this.value()?.[1] ?? null]);\n\n        this.setValue([date, time]);\n        this.open.set(false);\n        setTimeout(\n            (caretIndex = DATE_FILLER_LENGTH + this.options.dateTimeSeparator.length) =>\n                this.el.setSelectionRange(caretIndex, caretIndex),\n        );\n    }\n\n    public override writeValue(value: [TuiDay, TuiTime | null] | null): void {\n        const reset = this.control.pristine && this.control.untouched && !value;\n        const changed = untracked(() => value !== this.value());\n\n        if (changed || reset) {\n            super.writeValue(value);\n            untracked(() => this.textfield.value.set(this.stringify(this.value())));\n        }\n    }\n\n    protected override processCalendar(calendar: TuiCalendar): void {\n        super.processCalendar(calendar);\n        calendar.disabledItemHandler = (day: TuiDay) =>\n            this.handlers.disabledItemHandler()([day, null]);\n    }\n\n    protected override onValueChange(value: string): void {\n        this.textfield.value.set(value);\n        this.control?.control?.updateValueAndValidity({emitEvent: false});\n\n        const [date = '', time = ''] = value.split(this.options.dateTimeSeparator);\n        const parsedDate =\n            date.length >= DATE_FILLER_LENGTH\n                ? TuiDay.normalizeParse(date, this.format().mode)\n                : null;\n        const parsedTime =\n            time.length === this.timeMode().length ? TuiTime.fromString(time) : null;\n\n        if (!parsedDate || (time && !parsedTime)) {\n            return this.onChange(null);\n        }\n\n        const [prevDate, prevTime = null] = this.value() ?? [];\n\n        if (!prevDate?.daySame(parsedDate) || Number(parsedTime) !== Number(prevTime)) {\n            this.onChange([parsedDate, parsedTime]);\n        }\n    }\n\n    protected override stringify(\n        value: readonly [TuiDay, TuiTime | null] | null,\n    ): string {\n        const [date, time] = value ?? [];\n\n        const dateString =\n            date?.toString(this.format().mode, this.format().separator) ?? '';\n        const timeString = time?.toString(this.timeMode());\n\n        return timeString\n            ? `${dateString}${this.options.dateTimeSeparator}${timeString}`\n            : dateString;\n    }\n\n    private clampTime([date, time]: [TuiDay, TuiTime | null]): [TuiDay, TuiTime | null] {\n        const min = date.daySame(this.min())\n            ? this.minTime().toAbsoluteMilliseconds()\n            : -Infinity;\n        const max = date.daySame(this.max())\n            ? this.maxTime().toAbsoluteMilliseconds()\n            : Infinity;\n\n        return [\n            date,\n            time &&\n                TuiTime.fromAbsoluteMilliseconds(\n                    tuiClamp(time.toAbsoluteMilliseconds(), min, max),\n                ),\n        ];\n    }\n\n    private computeMask(\n        params: Omit<Required<MaskitoDateTimeParams>, 'timeStep'>,\n    ): MaskitoOptions {\n        const options = maskitoDateTimeOptionsGenerator(params);\n        const {timeMode, dateMode, dateTimeSeparator} = params;\n        const inputModeSwitchPlugin = maskitoSelectionChangeHandler((element) => {\n            element.inputMode =\n                element.selectionStart! >=\n                dateMode.length + dateTimeSeparator.length + timeMode.indexOf(' AA')\n                    ? 'text'\n                    : 'numeric';\n        });\n\n        return {\n            ...options,\n            plugins: options.plugins.concat(\n                timeMode.includes('AA') ? inputModeSwitchPlugin : [],\n            ),\n        };\n    }\n\n    private toNativeDate([{year, month, day}, {hours, minutes, seconds, ms}]: readonly [\n        TuiDay,\n        TuiTime,\n    ]): Date {\n        return new Date(year, month, day, hours, minutes, seconds, ms);\n    }\n}\n","import {NgIf} from '@angular/common';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    computed,\n    inject,\n    ViewEncapsulation,\n} from '@angular/core';\nimport {TuiDay, TuiTime} from '@taiga-ui/cdk/date-time';\nimport {\n    TuiTextfieldContent,\n    TuiWithNativePicker,\n} from '@taiga-ui/core/components/textfield';\nimport {TuiNativeTimePicker} from '@taiga-ui/kit/components/input-time';\n\nimport {TuiInputDateTimeDirective} from './input-date-time.directive';\n\n@Component({\n    standalone: true,\n    selector: 'input[tuiInputDateTime][type=\"datetime-local\"]',\n    imports: [NgIf, TuiTextfieldContent],\n    templateUrl: './input-date-time.template.html',\n    styleUrls: ['./input-date-time.style.less'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    hostDirectives: [TuiWithNativePicker],\n    host: {ngSkipHydration: 'true'},\n})\nexport class TuiInputDateTimeComponent extends TuiNativeTimePicker {\n    protected readonly host = inject(TuiInputDateTimeDirective);\n    protected readonly step = computed(() => this.getStep(this.host.timeMode()));\n    protected readonly value = computed(() => this.toISOString(this.host.value()));\n\n    protected min = computed(() =>\n        this.toISOString([this.host.min(), this.host.minTime()]),\n    );\n\n    protected max = computed(() =>\n        this.toISOString([this.host.max(), this.host.maxTime()]),\n    );\n\n    protected onInput(value: string): void {\n        if (!value) {\n            return this.host.setValue(null);\n        }\n\n        const date = new Date(value);\n        const day = TuiDay.fromLocalNativeDate(date);\n        const time = TuiTime.fromLocalNativeDate(date);\n\n        this.host.setValue([day, time]);\n    }\n}\n","<ng-container *ngIf=\"host.native\">\n    <input\n        *tuiTextfieldContent\n        type=\"datetime-local\"\n        [attr.list]=\"list\"\n        [max]=\"max()\"\n        [min]=\"min()\"\n        [step]=\"step()\"\n        [value]=\"value()\"\n        (click.stop.zoneless)=\"(0)\"\n        (input)=\"onInput($any($event.target).value)\"\n        (pointerdown.stop.zoneless)=\"(0)\"\n    />\n</ng-container>\n","import {TuiCalendar} from '@taiga-ui/core/components/calendar';\n\nimport {TuiInputDateTimeComponent} from './input-date-time.component';\nimport {TuiInputDateTimeDirective} from './input-date-time.directive';\n\nexport const TuiInputDateTime = [\n    TuiInputDateTimeDirective,\n    TuiInputDateTimeComponent,\n    TuiCalendar,\n] as const;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1"],"mappings":"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"}