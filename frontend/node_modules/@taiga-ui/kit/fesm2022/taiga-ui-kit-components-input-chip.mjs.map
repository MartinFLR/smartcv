{"version":3,"file":"taiga-ui-kit-components-input-chip.mjs","sources":["../../../projects/kit/components/input-chip/input-chip.component.ts","../../../projects/kit/components/input-chip/input-chip.template.html","../../../projects/kit/components/input-chip/input-chip.options.ts","../../../projects/kit/components/input-chip/input-chip.directive.ts","../../../projects/kit/components/input-chip/input-chip.ts","../../../projects/kit/components/input-chip/taiga-ui-kit-components-input-chip.ts"],"sourcesContent":["import {NgIf} from '@angular/common';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    computed,\n    ElementRef,\n    inject,\n    Input,\n    signal,\n    ViewChild,\n} from '@angular/core';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {TUI_IS_MOBILE} from '@taiga-ui/cdk/tokens';\nimport {type TuiContext} from '@taiga-ui/cdk/types';\nimport {tuiDirectiveBinding, tuiIsString} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {TuiButton} from '@taiga-ui/core/components/button';\nimport {\n    TUI_TEXTFIELD_OPTIONS,\n    TuiTextfieldComponent,\n    type TuiTextfieldItem,\n} from '@taiga-ui/core/components/textfield';\nimport {TuiAppearance} from '@taiga-ui/core/directives/appearance';\nimport {TuiHintDirective, TuiHintOverflow} from '@taiga-ui/core/directives/hint';\nimport {\n    TUI_ITEMS_HANDLERS,\n    type TuiItemsHandlers,\n} from '@taiga-ui/core/directives/items-handlers';\nimport {TUI_COMMON_ICONS} from '@taiga-ui/core/tokens';\nimport {TuiChip} from '@taiga-ui/kit/components/chip';\nimport {TuiFade} from '@taiga-ui/kit/directives/fade';\nimport {tuiInjectValue} from '@taiga-ui/kit/utils';\nimport {injectContext} from '@taiga-ui/polymorpheus';\n\n@Component({\n    standalone: true,\n    selector: 'tui-input-chip',\n    imports: [\n        FormsModule,\n        NgIf,\n        ReactiveFormsModule,\n        TuiButton,\n        TuiChip,\n        TuiFade,\n        TuiHintOverflow,\n    ],\n    templateUrl: './input-chip.template.html',\n    styleUrls: ['./input-chip.styles.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    hostDirectives: [TuiChip],\n    host: {\n        tuiChip: '',\n        class: 'tui-interactive',\n        '[class._edit]': 'editing()',\n        '[attr.tabIndex]': 'disabled() ? null : -1',\n        '(click)': 'editing() && $event.stopPropagation()',\n        '(keydown.backspace.prevent)': 'delete()',\n        '(keydown.enter.prevent)': 'edit()',\n        '(dblclick)': 'edit()',\n    },\n})\nexport class TuiInputChipComponent<T> {\n    @ViewChild(TuiChip, {read: ElementRef})\n    private readonly input?: ElementRef<HTMLInputElement>;\n\n    private readonly options = inject(TUI_TEXTFIELD_OPTIONS);\n    private readonly context = injectContext<TuiContext<TuiTextfieldItem<T>>>();\n    private readonly value = tuiInjectValue<readonly T[]>();\n\n    protected readonly icons = inject(TUI_COMMON_ICONS);\n    protected readonly mobile = inject(TUI_IS_MOBILE);\n    protected readonly internal = signal(this.context.$implicit.item);\n    protected readonly editing = signal(false);\n    protected readonly hint = inject(TuiHintDirective, {self: true, optional: true});\n    protected readonly handlers: TuiItemsHandlers<T> = inject(TUI_ITEMS_HANDLERS);\n    protected readonly textfield = inject(TuiTextfieldComponent);\n\n    protected readonly disabled = tuiDirectiveBinding(\n        TuiAppearance,\n        'tuiAppearanceState',\n        computed(() =>\n            this.handlers.disabledItemHandler()(this.context.$implicit.item)\n                ? 'disabled'\n                : null,\n        ),\n    );\n\n    protected readonly size = tuiDirectiveBinding(\n        TuiChip,\n        'size',\n        computed(() => (this.options.size() === 'l' ? 's' : 'xs')),\n    );\n\n    @Input()\n    public editable = true;\n\n    protected get index(): number {\n        return this.context.$implicit.index;\n    }\n\n    protected delete(): void {\n        this.textfield.cva?.onChange(this.value().filter((_, i) => i !== this.index));\n\n        if (!this.mobile) {\n            this.textfield.input?.nativeElement.focus({preventScroll: true});\n        }\n    }\n\n    protected save(): void {\n        if (!this.internal()) {\n            this.delete();\n        } else if (this.handlers.disabledItemHandler()(this.internal())) {\n            return;\n        }\n\n        const value = this.value().map((item, index) =>\n            index === this.index ? this.internal() : item,\n        );\n\n        this.textfield.cva?.onChange(value);\n        this.editing.set(false);\n        this.textfield.input?.nativeElement.focus({preventScroll: true});\n    }\n\n    protected cancel(): void {\n        this.editing.set(false);\n        this.internal.set(this.context.$implicit.item);\n    }\n\n    protected edit(): void {\n        if (\n            !this.editable ||\n            !this.textfield.cva?.interactive() ||\n            !tuiIsString(this.internal())\n        ) {\n            return;\n        }\n\n        this.editing.set(true);\n        setTimeout(() => this.input?.nativeElement.focus());\n    }\n}\n","<input\n    appearance=\"\"\n    enterkeyhint=\"enter\"\n    tuiChip\n    class=\"t-input\"\n    [disabled]=\"!editing()\"\n    [ngModel]=\"internal()\"\n    [ngModelOptions]=\"{standalone: true}\"\n    (blur)=\"cancel()\"\n    (keydown.enter)=\"save()\"\n    (keydown.esc)=\"cancel()\"\n    (keydown.stop)=\"(0)\"\n    (ngModelChange)=\"internal.set($event)\"\n/>\n<div\n    tuiFade\n    tuiFadeOffset=\"0.5rem\"\n    class=\"t-text\"\n    [tuiHintOverflow]=\"hint?.content() ? null : handlers.stringify()(internal())\"\n    (mousedown.prevent.zoneless)=\"(0)\"\n>\n    {{ handlers.stringify()(internal()) }}\n</div>\n<button\n    *ngIf=\"textfield.cva?.interactive() && !editing() && !disabled()\"\n    tabIndex=\"-1\"\n    tuiIconButton\n    type=\"button\"\n    [iconStart]=\"icons.close\"\n    (click.stop)=\"delete()\"\n    (pointerdown.prevent.stop.zoneless)=\"(0)\"\n>\n    Remove\n</button>\n","import {tuiCreateOptions} from '@taiga-ui/cdk/utils/di';\n\nexport interface TuiInputChipOptions {\n    readonly separator: RegExp | string;\n    readonly unique: boolean;\n}\n\nexport const TUI_INPUT_CHIP_DEFAULT_OPTIONS: TuiInputChipOptions = {\n    separator: ',',\n    unique: true,\n};\n\nexport const [TUI_INPUT_CHIP_OPTIONS, tuiInputChipOptionsProvider] = tuiCreateOptions(\n    TUI_INPUT_CHIP_DEFAULT_OPTIONS,\n);\n","import {Directive, inject, Input} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {tuiAsControl, TuiControl} from '@taiga-ui/cdk/classes';\nimport {TuiActiveZone} from '@taiga-ui/cdk/directives/active-zone';\nimport {TuiNativeValidator} from '@taiga-ui/cdk/directives/native-validator';\nimport {TUI_IS_MOBILE, tuiFallbackValueProvider} from '@taiga-ui/cdk/tokens';\nimport {tuiGetClipboardDataText, tuiInjectElement} from '@taiga-ui/cdk/utils/dom';\nimport {tuiDirectiveBinding} from '@taiga-ui/cdk/utils/miscellaneous';\nimport {\n    tuiAsTextfieldAccessor,\n    type TuiTextfieldAccessor,\n    TuiTextfieldBase,\n    TuiTextfieldMultiComponent,\n} from '@taiga-ui/core/components/textfield';\nimport {\n    TuiDropdownDirective,\n    TuiDropdownOpen,\n    tuiDropdownOpen,\n} from '@taiga-ui/core/directives/dropdown';\nimport {\n    TUI_ITEMS_HANDLERS,\n    type TuiItemsHandlers,\n} from '@taiga-ui/core/directives/items-handlers';\nimport {filter} from 'rxjs';\n\nimport {TUI_INPUT_CHIP_OPTIONS} from './input-chip.options';\n\n// TODO(v5): remove base component after angular update\n@Directive({\n    standalone: true,\n    host: {\n        enterkeyhint: 'enter',\n        '[disabled]': 'disabled()',\n        '(keydown.enter.prevent)': 'onEnter()',\n        '(keydown.zoneless)': 'onBackspace($event.key)',\n        '(input)': 'onInput()',\n        '(paste.prevent)': 'onPaste($event)',\n        '(drop.prevent)': 'onPaste($event)',\n    },\n})\nexport class TuiInputChipBaseDirective<T>\n    extends TuiControl<T[]>\n    implements TuiTextfieldAccessor<T[]>\n{\n    private readonly options = inject(TUI_INPUT_CHIP_OPTIONS);\n    private readonly mobile = inject(TUI_IS_MOBILE);\n    private readonly dropdown = inject(TuiDropdownDirective);\n\n    protected readonly textfield = inject(TuiTextfieldMultiComponent);\n    protected readonly open = tuiDropdownOpen();\n    protected readonly handlers: TuiItemsHandlers<T> = inject(TUI_ITEMS_HANDLERS);\n    protected readonly enabled = tuiDirectiveBinding(\n        TuiDropdownOpen,\n        'tuiDropdownEnabled',\n        this.interactive,\n        {},\n    );\n\n    protected readonly sub = inject(TuiActiveZone)\n        .tuiActiveZoneChange.pipe(\n            filter((active) => !active && !this.el.matches('select')),\n            takeUntilDestroyed(),\n        )\n        .subscribe(() => {\n            this.onEnter();\n            this.textfield.value.set('');\n        });\n\n    @Input()\n    public separator = this.options.separator;\n\n    @Input()\n    public unique = this.options.unique;\n\n    public readonly el = tuiInjectElement<HTMLInputElement>();\n\n    public setValue(value: T[]): void {\n        this.textfield.value.set('');\n        this.onChange(\n            this.unique ? Array.from(new Set(value.reverse())).reverse() : value,\n        );\n    }\n\n    protected onEnter(): void {\n        const value = this.textfield.value().trim();\n        const items: any[] = this.separator ? value.split(this.separator) : [value];\n        const valid = items.filter(\n            (item) => item && !this.handlers.disabledItemHandler()(item),\n        );\n\n        if (!value || !valid.length) {\n            return;\n        }\n\n        this.setValue([...this.value(), ...valid]);\n        this.scrollTo();\n    }\n\n    protected onInput(): void {\n        this.open.set(!!this.dropdown.content);\n\n        if (this.separator && this.textfield.value().match(this.separator)) {\n            this.onEnter();\n        } else {\n            this.scrollTo();\n        }\n    }\n\n    protected onPaste(event: ClipboardEvent | DragEvent): void {\n        const value =\n            'dataTransfer' in event\n                ? event.dataTransfer?.getData('text/plain') || ''\n                : tuiGetClipboardDataText(event);\n\n        this.textfield.value.set(value);\n        this.onEnter();\n    }\n\n    protected onBackspace(key: string): void {\n        // (keydown.backspace) doesn't emit event on empty input in ios safari\n        if (key === 'Backspace' && !this.textfield.value() && this.interactive()) {\n            if (this.mobile || !this.textfield.item) {\n                this.onChange(this.value().slice(0, -1));\n            } else {\n                this.el.dispatchEvent(\n                    new KeyboardEvent('keydown', {\n                        key: 'ArrowLeft',\n                        bubbles: true,\n                    }),\n                );\n            }\n        }\n    }\n\n    protected scrollTo(): void {\n        const sign = this.textfield.el.matches('[dir=\"rtl\"] :scope') ? -1 : 1;\n\n        // Allow change detection to run and add new tag to DOM\n        setTimeout(() => {\n            this.textfield.el.scrollTo({\n                left: sign * Number.MAX_SAFE_INTEGER,\n                top: Number.MAX_SAFE_INTEGER,\n            });\n        });\n    }\n}\n\n@Directive({\n    standalone: true,\n    selector: 'input[tuiInputChip]',\n    providers: [\n        tuiAsControl(TuiInputChipDirective),\n        tuiFallbackValueProvider([]),\n        tuiAsTextfieldAccessor(TuiInputChipDirective),\n    ],\n    hostDirectives: [\n        TuiNativeValidator,\n        {\n            directive: TuiTextfieldBase,\n            inputs: ['invalid', 'focused', 'readOnly', 'state'],\n        },\n    ],\n})\nexport class TuiInputChipDirective<T> extends TuiInputChipBaseDirective<T> {}\n","import {TuiInputChipComponent} from './input-chip.component';\nimport {TuiInputChipDirective} from './input-chip.directive';\n\nexport const TuiInputChip = [TuiInputChipDirective, TuiInputChipComponent] as const;\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i1","i2"],"mappings":"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"}